{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/@pnp/common/collections.js","webpack:///./node_modules/@pnp/common/libconfig.js","webpack:///./node_modules/@pnp/common/storage.js","webpack:///./node_modules/@pnp/common/util.js","webpack:///./node_modules/@pnp/sp/splibconfig.js","webpack:///./node_modules/@pnp/sp/utils/toabsoluteurl.js","webpack:///./node_modules/@pnp/common/net.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/@pnp/odata/batch.js","webpack:///./node_modules/@pnp/odata/caching.js","webpack:///./node_modules/@pnp/odata/add-prop.js","webpack:///./node_modules/@pnp/odata/invokable-extensions.js","webpack:///./node_modules/@pnp/odata/invokable-binder.js","webpack:///./node_modules/@pnp/odata/parsers.js","webpack:///./node_modules/@pnp/odata/queryable.js","webpack:///./node_modules/@pnp/logging/logger.js","webpack:///./node_modules/@pnp/logging/listeners.js","webpack:///./node_modules/@pnp/odata/pipeline.js","webpack:///./node_modules/@pnp/odata/pipeline-binder.js","webpack:///./node_modules/@pnp/odata/request-builders.js","webpack:///./node_modules/@pnp/sp/utils/metadata.js","webpack:///./node_modules/@pnp/sp/utils/extractweburl.js","webpack:///./node_modules/@pnp/sp/telemetry.js","webpack:///./node_modules/@pnp/sp/sphttpclient.js","webpack:///./node_modules/@pnp/sp/operations.js","webpack:///./node_modules/@pnp/sp/sharepointqueryable.js","webpack:///./node_modules/@pnp/sp/batch.js","webpack:///./node_modules/@pnp/sp/decorators.js","webpack:///./node_modules/@pnp/sp/rest.js","webpack:///./node_modules/@pnp/sp/types.js","webpack:///./node_modules/@pnp/sp/odata.js","webpack:///./node_modules/@pnp/sp/utils/escapeQueryStrValue.js","webpack:///./node_modules/@pnp/sp/sites/types.js","webpack:///./node_modules/@pnp/sp/sites/index.js","webpack:///./node_modules/@pnp/sp/webs/types.js","webpack:///./node_modules/@pnp/sp/utils/toResourcePath.js","webpack:///./node_modules/@pnp/sp/webs/index.js","webpack:///./node_modules/@pnp/sp/lists/types.js","webpack:///./node_modules/@pnp/sp/lists/web.js","webpack:///./src/providers/HomeProviders.ts","webpack:///./src/webparts/home.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__decorate","decorators","target","desc","arguments","length","getOwnPropertyDescriptor","Reflect","decorate","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__read","ar","error","__spread","concat","objectEntries","entries","keys","map","k","RuntimeConfig","RuntimeConfigImpl","_v","Map","set","assign","config","maps","_i","forEach","mergeMaps","configurable","console","warn","PnPClientStorageWrapper","store","defaultTimeoutMinutes","enabled","test","enableCacheExpiration","cacheExpirationHandler","MemoryStorage","getItem","persistable","JSON","parse","Date","expiration","delete","put","expire","setItem","createPersistable","removeItem","getOrPut","_a","deleteExpired","undefined","defaultTimeout","defaultCachingTimeoutSeconds","pnp","_this","setTimeout","cacheExpirationIntervalMilliseconds","catch","_store","size","clear","index","from","data","PnPClientStorage","_local","_session","localStorage","sessionStorage","getCtxCallback","context","method","params","dateAdd","date","interval","units","ret","toString","toLowerCase","setFullYear","getFullYear","setMonth","getMonth","setDate","getDate","setTime","getTime","combine","paths","filter","path","stringIsNullOrEmpty","replace","join","getGUID","now","Math","random","floor","isFunc","objectDefinedNotNull","obj","isArray","array","source","noOverwrite","check","getOwnPropertyNames","reduce","isUrlAbsolute","url","jsS","stringify","hOP","setup","SPRuntimeConfig","SPRuntimeConfigImpl","spPart","headers","baseUrl","spfxContext","pageContext","web","absoluteUrl","fetchClientFactory","toAbsoluteUrl","candidateUrl","global","_spPageContextInfo","webAbsoluteUrl","webServerRelativeUrl","location","baseUrl_1","indexOf","substr","mergeHeaders","Request","append","mergeOptions","getADALResource","u","URL","protocol","hostname","FetchClient","fetch","options","_super","SPFxAdalClient","token","getToken","resource","aadTokenProviderFactory","getTokenProvider","BearerTokenFetchClient","_token","Headers","Function","window","Batch","_batchId","_reqs","_deps","_rDeps","_index","sort","info1","info2","track","batchee","batch","batchIndex","add","info","id","requestId","toUpperCase","parser","addDependency","resolver","addResolveBatchDependency","execute","all","executeImpl","CachingOptions","storeName","defaultCachingStore","storage","local","session","CachingParserWrapper","cacheOptions","response","cacheData","addProp","factory","_enableExtensions","globaExtensions","ObjExtensionsSym","extendCol","a","applyFactoryExtensions","args","extensions","has","extensionOrDefault","or","rest","extension","invoker","invokableFactory","defaultAction","as","ags","ie11","Proxy","_thisArg","argArray","receiver","ODataParser","handleError","parseImpl","parseFloat","status","text","txt","json","parseODataJSON","ok","init","results","TextParser","BlobParser","blob","JSONParser","BufferParser","arrayBuffer","buffer","LambdaParser","HttpRequestError","message","statusText","isHttpRequestError","clone","Error","cloneQueryableData","parsed","batchDependency","cachingOptions","clientFactory","LogLevel","Queryable","dataSeed","_data","cloneParentWasCaching","parentUrl","query","useCaching","toUrl","pathPart","configure","configureFrom","usingCaching","globalCacheDisable","usingParser","withPipeline","pipeline","pipes","slice","inBatch","hasBatch","addBatchDependency","cloneTo","settings","includeBatch","cloneParentCacheOptions","Logger","instance","activeLogLevel","_instance","LoggerImpl","subscribe","listeners","listener","clearSubscribers","count","write","level","log","writeJSON","entry","err","subscribers","subscriber","ConsoleListener","msg","format","FunctionListener","setResult","hasResult","shift","pipe","promise","ctx","returnResult","isBatched","requestPipelineMethod","alwaysRun","propertyKey","descriptor","PipelineMethods","logStart","caching","hydrate","send","batchId","client","opts","logEnd","defaultPipelineBinder","previous","metadata","type","extractWebUrl","tag","originalMethod","getClientTag","h","deleteFromCollection","methodName","isTagged","SPHttpClient","_impl","_digestCache","webUrl","cachedDigest","resp","newCachedDigest","digests","fetchRaw","cache","credentials","GetContextWebInformation","FormDigestTimeoutSeconds","FormDigestValue","getDigestFactory","clientTag","digest","rawHeaders","retry","setRetry","delay","parseInt","attempts","retryCount","post","patch","spClientBinder","operation","toUrlAndQuery","spGet","_forceCaching","spPost","spInvokableFactory","_SharePointQueryable","lastIndexOf","aliasedParams","match","labelName","char","select","selects","expand","expands","additionalPath","getParent","parent","SharePointQueryable","_SharePointQueryableCollection","orderBy","ascending","split","skip","top","SharePointQueryableCollection","_SharePointQueryableInstance","_update","mapper","props","SharePointQueryableInstance","deleteable","deleteableWithETag","eTag","spPostDeleteETag","SPBatch","ParseResponse","responses","statusRegExp","RegExp","lines","state","line","trim","parts","exec","Response","absoluteRequestUrl","batchBody","currentChangeSetId","reqInfo","castHeaders","batchOptions","requests","request","_b","e_1","_c","defaultPath","class_1","PrincipalType","PrincipalSource","PageType","SPRest","_options","_baseUrl","sp","odataUrlFrom","candidate","__metadata","uri","editLink","SPODataEntityParserImpl","SPODataEntityArrayParserImpl","escapeQueryStrValue","encodeURIComponent","Site","_Site","Web","getRootWeb","rootWeb","Url","getContextInfo","q","SupportedSchemaVersions","createBatch","site","siteId","Id","getDocumentLibraries","absoluteWebUrl","GetDocumentLibraries","getWebUrlFromPageUrl","absolutePageUrl","GetWebUrlFromPageUrl","getChanges","postBody","openWebById","webId","createCommunicationSite","title","lcid","shareByEmailEnabled","description","classification","siteDesignId","hubSiteId","owner","methodUrl","Classification","Description","HubSiteId","Lcid","Owner","ShareByEmailEnabled","SiteDesignId","Title","WebTemplate","WebTemplateExtensionId","createModernTeamSite","displayName","alias","isPublic","owners","optionalParams","CreationOptions","Owners","Webs","_Webs","template","language","inheritPermissions","Language","UseSamePermissionsAsParentSite","_Web","getParentWeb","ParentWeb","getSubwebsFilteredForCurrentUser","nWebTemplateFilter","nConfigurationFilter","update","properties","applyTheme","colorPaletteUrl","fontSchemeUrl","backgroundImageUrl","shareGenerated","applyWebTemplate","availableWebTemplates","includeCrossLanugage","mapToIcon","filename","progId","getStorageEntity","setStorageEntity","comments","removeStorageEntity","toResourcePath","DecodedUrl","RenderListDataOptions","ControlMode","Lists","_Lists","getById","List","getByTitle","enableContentTypes","additionalSettings","addSettings","list","ensure","addOrUpdateSettings","ContentTypesEnabled","created","ensureSiteAssetsLibrary","ensureSitePagesLibrary","_List","getItemsByCAMLQuery","getListItemChangesSinceToken","recycle","Recycle","renderListData","viewXml","RenderListData","renderListDataAsStream","parameters","overrideParameters","queryParams","RenderOptions","renderListFormData","itemId","formId","RenderListFormData","reserveListItemId","ReserveListItemId","getListItemEntityTypeFullName","ListItemEntityTypeFullName","addValidateUpdateItemUsingPath","formValues","decodedUrl","bNewDocumentUpdate","checkInComment","additionalProps","addProps","res","FolderPath","leafName","LeafName","objectType","UnderlyingObjectType","listItemCreateInfo","AddValidateUpdateItemUsingPath","getList","listRelativeUrl","getCatalog","Accept","getLists","lists","item","hidden","Hidden","testPromise","_provider","document","getElementById","innerText"],"mappings":"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","file":"home.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { isFunc } from \"./util\";\r\n/**\r\n * Used to calculate the object properties, with polyfill if needed\r\n */\r\nvar objectEntries = isFunc(Object.entries) ? Object.entries : function (o) { return Object.keys(o).map(function (k) { return [k, o[k]]; }); };\r\n/**\r\n * Converts the supplied object to a map\r\n *\r\n * @param o The object to map\r\n */\r\nexport function objectToMap(o) {\r\n    if (o !== undefined && o !== null) {\r\n        return new Map(objectEntries(o));\r\n    }\r\n    return new Map();\r\n}\r\n/**\r\n * Merges to Map instances together, overwriting values in target with matching keys, last in wins\r\n *\r\n * @param target map into which the other maps are merged\r\n * @param maps One or more maps to merge into the target\r\n */\r\nexport function mergeMaps(target) {\r\n    var maps = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        maps[_i - 1] = arguments[_i];\r\n    }\r\n    for (var i = 0; i < maps.length; i++) {\r\n        maps[i].forEach(function (v, k) {\r\n            target.set(k, v);\r\n        });\r\n    }\r\n    return target;\r\n}\r\n//# sourceMappingURL=collections.js.map","import { mergeMaps, objectToMap } from \"./collections\";\r\nexport function setup(config) {\r\n    RuntimeConfig.assign(config);\r\n}\r\n// lable mapping for known config values\r\nvar s = [\r\n    \"defaultCachingStore\",\r\n    \"defaultCachingTimeoutSeconds\",\r\n    \"globalCacheDisable\",\r\n    \"enableCacheExpiration\",\r\n    \"cacheExpirationIntervalMilliseconds\",\r\n    \"spfxContext\",\r\n    \"ie11\",\r\n];\r\nvar RuntimeConfigImpl = /** @class */ (function () {\r\n    function RuntimeConfigImpl(_v) {\r\n        if (_v === void 0) { _v = new Map(); }\r\n        this._v = _v;\r\n        // setup defaults\r\n        this._v.set(s[0], \"session\");\r\n        this._v.set(s[1], 60);\r\n        this._v.set(s[2], false);\r\n        this._v.set(s[3], false);\r\n        this._v.set(s[4], 750);\r\n        this._v.set(s[5], null);\r\n        this._v.set(s[6], false);\r\n    }\r\n    /**\r\n     *\r\n     * @param config The set of properties to add to the globa configuration instance\r\n     */\r\n    RuntimeConfigImpl.prototype.assign = function (config) {\r\n        this._v = mergeMaps(this._v, objectToMap(config));\r\n    };\r\n    RuntimeConfigImpl.prototype.get = function (key) {\r\n        return this._v.get(key);\r\n    };\r\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"defaultCachingStore\", {\r\n        get: function () {\r\n            return this.get(s[0]);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"defaultCachingTimeoutSeconds\", {\r\n        get: function () {\r\n            return this.get(s[1]);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"globalCacheDisable\", {\r\n        get: function () {\r\n            return this.get(s[2]);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"enableCacheExpiration\", {\r\n        get: function () {\r\n            return this.get(s[3]);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"cacheExpirationIntervalMilliseconds\", {\r\n        get: function () {\r\n            return this.get(s[4]);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"spfxContext\", {\r\n        get: function () {\r\n            return this.get(s[5]);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RuntimeConfigImpl.prototype, \"ie11\", {\r\n        get: function () {\r\n            var v = this.get(s[6]);\r\n            if (v) {\r\n                console.warn(\"PnPjs is running in ie11 compat mode. Not all features may work as expected.\");\r\n            }\r\n            return v;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return RuntimeConfigImpl;\r\n}());\r\nexport { RuntimeConfigImpl };\r\nvar _runtimeConfig = new RuntimeConfigImpl();\r\nexport var RuntimeConfig = _runtimeConfig;\r\n//# sourceMappingURL=libconfig.js.map","import { __awaiter, __generator } from \"tslib\";\r\nimport { dateAdd, getCtxCallback, jsS, objectDefinedNotNull } from \"./util\";\r\nimport { RuntimeConfig } from \"./libconfig\";\r\n/**\r\n * A wrapper class to provide a consistent interface to browser based storage\r\n *\r\n */\r\nvar PnPClientStorageWrapper = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of the PnPClientStorageWrapper class\r\n     *\r\n     * @constructor\r\n     */\r\n    function PnPClientStorageWrapper(store, defaultTimeoutMinutes) {\r\n        if (defaultTimeoutMinutes === void 0) { defaultTimeoutMinutes = -1; }\r\n        this.store = store;\r\n        this.defaultTimeoutMinutes = defaultTimeoutMinutes;\r\n        this.enabled = this.test();\r\n        // if the cache timeout is enabled call the handler\r\n        // this will clear any expired items and set the timeout function\r\n        if (RuntimeConfig.enableCacheExpiration) {\r\n            this.cacheExpirationHandler();\r\n        }\r\n    }\r\n    PnPClientStorageWrapper.bind = function (store) {\r\n        return new PnPClientStorageWrapper(typeof (store) === \"undefined\" ? new MemoryStorage() : store);\r\n    };\r\n    /**\r\n     * Get a value from storage, or null if that value does not exist\r\n     *\r\n     * @param key The key whose value we want to retrieve\r\n     */\r\n    PnPClientStorageWrapper.prototype.get = function (key) {\r\n        if (!this.enabled) {\r\n            return null;\r\n        }\r\n        var o = this.store.getItem(key);\r\n        if (!objectDefinedNotNull(o)) {\r\n            return null;\r\n        }\r\n        var persistable = JSON.parse(o);\r\n        if (new Date(persistable.expiration) <= new Date()) {\r\n            this.delete(key);\r\n            return null;\r\n        }\r\n        else {\r\n            return persistable.value;\r\n        }\r\n    };\r\n    /**\r\n     * Adds a value to the underlying storage\r\n     *\r\n     * @param key The key to use when storing the provided value\r\n     * @param o The value to store\r\n     * @param expire Optional, if provided the expiration of the item, otherwise the default is used\r\n     */\r\n    PnPClientStorageWrapper.prototype.put = function (key, o, expire) {\r\n        if (this.enabled) {\r\n            this.store.setItem(key, this.createPersistable(o, expire));\r\n        }\r\n    };\r\n    /**\r\n     * Deletes a value from the underlying storage\r\n     *\r\n     * @param key The key of the pair we want to remove from storage\r\n     */\r\n    PnPClientStorageWrapper.prototype.delete = function (key) {\r\n        if (this.enabled) {\r\n            this.store.removeItem(key);\r\n        }\r\n    };\r\n    /**\r\n     * Gets an item from the underlying storage, or adds it if it does not exist using the supplied getter function\r\n     *\r\n     * @param key The key to use when storing the provided value\r\n     * @param getter A function which will upon execution provide the desired value\r\n     * @param expire Optional, if provided the expiration of the item, otherwise the default is used\r\n     */\r\n    PnPClientStorageWrapper.prototype.getOrPut = function (key, getter, expire) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var o;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.enabled) {\r\n                            return [2 /*return*/, getter()];\r\n                        }\r\n                        o = this.get(key);\r\n                        if (!(o === null)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, getter()];\r\n                    case 1:\r\n                        o = _a.sent();\r\n                        this.put(key, o, expire);\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, o];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Deletes any expired items placed in the store by the pnp library, leaves other items untouched\r\n     */\r\n    PnPClientStorageWrapper.prototype.deleteExpired = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var i, key;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.enabled) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        i = 0;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!(i < this.store.length)) return [3 /*break*/, 4];\r\n                        key = this.store.key(i);\r\n                        if (!(key !== null)) return [3 /*break*/, 3];\r\n                        if (!/[\"|']?pnp[\"|']? ?: ?1/i.test(this.store.getItem(key))) return [3 /*break*/, 3];\r\n                        // get those items as get will delete from cache if they are expired\r\n                        return [4 /*yield*/, this.get(key)];\r\n                    case 2:\r\n                        // get those items as get will delete from cache if they are expired\r\n                        _a.sent();\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Used to determine if the wrapped storage is available currently\r\n     */\r\n    PnPClientStorageWrapper.prototype.test = function () {\r\n        var str = \"t\";\r\n        try {\r\n            this.store.setItem(str, str);\r\n            this.store.removeItem(str);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Creates the persistable to store\r\n     */\r\n    PnPClientStorageWrapper.prototype.createPersistable = function (o, expire) {\r\n        if (expire === undefined) {\r\n            // ensure we are by default inline with the global library setting\r\n            var defaultTimeout = RuntimeConfig.defaultCachingTimeoutSeconds;\r\n            if (this.defaultTimeoutMinutes > 0) {\r\n                defaultTimeout = this.defaultTimeoutMinutes * 60;\r\n            }\r\n            expire = dateAdd(new Date(), \"second\", defaultTimeout);\r\n        }\r\n        return jsS({ pnp: 1, expiration: expire, value: o });\r\n    };\r\n    /**\r\n     * Deletes expired items added by this library in this.store and sets a timeout to call itself\r\n     */\r\n    PnPClientStorageWrapper.prototype.cacheExpirationHandler = function () {\r\n        var _this = this;\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        this.deleteExpired().then(function (_) {\r\n            // call ourself in the future\r\n            setTimeout(getCtxCallback(_this, _this.cacheExpirationHandler), RuntimeConfig.cacheExpirationIntervalMilliseconds);\r\n        }).catch(console.error);\r\n    };\r\n    return PnPClientStorageWrapper;\r\n}());\r\nexport { PnPClientStorageWrapper };\r\n/**\r\n * A thin implementation of in-memory storage for use in nodejs\r\n */\r\nvar MemoryStorage = /** @class */ (function () {\r\n    function MemoryStorage(_store) {\r\n        if (_store === void 0) { _store = new Map(); }\r\n        this._store = _store;\r\n    }\r\n    Object.defineProperty(MemoryStorage.prototype, \"length\", {\r\n        get: function () {\r\n            return this._store.size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MemoryStorage.prototype.clear = function () {\r\n        this._store.clear();\r\n    };\r\n    MemoryStorage.prototype.getItem = function (key) {\r\n        return this._store.get(key);\r\n    };\r\n    MemoryStorage.prototype.key = function (index) {\r\n        return Array.from(this._store)[index][0];\r\n    };\r\n    MemoryStorage.prototype.removeItem = function (key) {\r\n        this._store.delete(key);\r\n    };\r\n    MemoryStorage.prototype.setItem = function (key, data) {\r\n        this._store.set(key, data);\r\n    };\r\n    return MemoryStorage;\r\n}());\r\n/**\r\n * A class that will establish wrappers for both local and session storage\r\n */\r\nvar PnPClientStorage = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of the PnPClientStorage class\r\n     *\r\n     * @constructor\r\n     */\r\n    function PnPClientStorage(_local, _session) {\r\n        if (_local === void 0) { _local = null; }\r\n        if (_session === void 0) { _session = null; }\r\n        this._local = _local;\r\n        this._session = _session;\r\n    }\r\n    Object.defineProperty(PnPClientStorage.prototype, \"local\", {\r\n        /**\r\n         * Provides access to the local storage of the browser\r\n         */\r\n        get: function () {\r\n            if (this._local === null) {\r\n                this._local = PnPClientStorageWrapper.bind(localStorage);\r\n            }\r\n            return this._local;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PnPClientStorage.prototype, \"session\", {\r\n        /**\r\n         * Provides access to the session storage of the browser\r\n         */\r\n        get: function () {\r\n            if (this._session === null) {\r\n                this._session = PnPClientStorageWrapper.bind(sessionStorage);\r\n            }\r\n            return this._session;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PnPClientStorage;\r\n}());\r\nexport { PnPClientStorage };\r\n//# sourceMappingURL=storage.js.map","/**\r\n * Gets a callback function which will maintain context across async calls.\r\n * Allows for the calling pattern getCtxCallback(thisobj, method, methodarg1, methodarg2, ...)\r\n *\r\n * @param context The object that will be the 'this' value in the callback\r\n * @param method The method to which we will apply the context and parameters\r\n * @param params Optional, additional arguments to supply to the wrapped method when it is invoked\r\n */\r\nexport function getCtxCallback(context, method) {\r\n    var params = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        params[_i - 2] = arguments[_i];\r\n    }\r\n    return function () {\r\n        method.apply(context, params);\r\n    };\r\n}\r\n/**\r\n * Adds a value to a date\r\n *\r\n * @param date The date to which we will add units, done in local time\r\n * @param interval The name of the interval to add, one of: ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second']\r\n * @param units The amount to add to date of the given interval\r\n *\r\n * http://stackoverflow.com/questions/1197928/how-to-add-30-minutes-to-a-javascript-date-object\r\n */\r\nexport function dateAdd(date, interval, units) {\r\n    var ret = new Date(date.toString()); // don't change original date\r\n    switch (interval.toLowerCase()) {\r\n        case \"year\":\r\n            ret.setFullYear(ret.getFullYear() + units);\r\n            break;\r\n        case \"quarter\":\r\n            ret.setMonth(ret.getMonth() + 3 * units);\r\n            break;\r\n        case \"month\":\r\n            ret.setMonth(ret.getMonth() + units);\r\n            break;\r\n        case \"week\":\r\n            ret.setDate(ret.getDate() + 7 * units);\r\n            break;\r\n        case \"day\":\r\n            ret.setDate(ret.getDate() + units);\r\n            break;\r\n        case \"hour\":\r\n            ret.setTime(ret.getTime() + units * 3600000);\r\n            break;\r\n        case \"minute\":\r\n            ret.setTime(ret.getTime() + units * 60000);\r\n            break;\r\n        case \"second\":\r\n            ret.setTime(ret.getTime() + units * 1000);\r\n            break;\r\n        default:\r\n            ret = undefined;\r\n            break;\r\n    }\r\n    return ret;\r\n}\r\n/**\r\n * Combines an arbitrary set of paths ensuring and normalizes the slashes\r\n *\r\n * @param paths 0 to n path parts to combine\r\n */\r\nexport function combine() {\r\n    var paths = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        paths[_i] = arguments[_i];\r\n    }\r\n    return paths\r\n        .filter(function (path) { return !stringIsNullOrEmpty(path); })\r\n        .map(function (path) { return path.replace(/^[\\\\|\\/]/, \"\").replace(/[\\\\|\\/]$/, \"\"); })\r\n        .join(\"/\")\r\n        .replace(/\\\\/g, \"/\");\r\n}\r\n/**\r\n * Gets a random string of chars length\r\n *\r\n * https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript\r\n *\r\n * @param chars The length of the random string to generate\r\n */\r\nexport function getRandomString(chars) {\r\n    var text = new Array(chars);\r\n    for (var i = 0; i < chars; i++) {\r\n        text[i] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".charAt(Math.floor(Math.random() * 62));\r\n    }\r\n    return text.join(\"\");\r\n}\r\n/**\r\n * Gets a random GUID value\r\n *\r\n * http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\r\n */\r\n/* tslint:disable no-bitwise */\r\nexport function getGUID() {\r\n    var d = Date.now();\r\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c === \"x\" ? r : (r & 0x3 | 0x8)).toString(16);\r\n    });\r\n}\r\n/* tslint:enable */\r\n/**\r\n * Determines if a given value is a function\r\n *\r\n * @param cf The thing to test for functionness\r\n */\r\nexport function isFunc(f) {\r\n    return typeof f === \"function\";\r\n}\r\n/**\r\n * Determines if an object is both defined and not null\r\n * @param obj Object to test\r\n */\r\nexport function objectDefinedNotNull(obj) {\r\n    return typeof obj !== \"undefined\" && obj !== null;\r\n}\r\n/**\r\n * @returns whether the provided parameter is a JavaScript Array or not.\r\n*/\r\nexport function isArray(array) {\r\n    return Array.isArray ? Array.isArray(array) : array && typeof array.length === \"number\" && array.constructor === Array;\r\n}\r\n/**\r\n * Provides functionality to extend the given object by doing a shallow copy\r\n *\r\n * @param target The object to which properties will be copied\r\n * @param source The source object from which properties will be copied\r\n * @param noOverwrite If true existing properties on the target are not overwritten from the source\r\n * @param filter If provided allows additional filtering on what properties are copied (propName: string) => boolean\r\n *\r\n */\r\nexport function assign(target, source, noOverwrite, filter) {\r\n    if (noOverwrite === void 0) { noOverwrite = false; }\r\n    if (filter === void 0) { filter = function () { return true; }; }\r\n    if (!objectDefinedNotNull(source)) {\r\n        return target;\r\n    }\r\n    // ensure we don't overwrite things we don't want overwritten\r\n    var check = noOverwrite ? function (o, i) { return !(i in o); } : function () { return true; };\r\n    // final filter we will use\r\n    var f = function (v) { return check(target, v) && filter(v); };\r\n    return Object.getOwnPropertyNames(source)\r\n        .filter(f)\r\n        .reduce(function (t, v) {\r\n        t[v] = source[v];\r\n        return t;\r\n    }, target);\r\n}\r\n/**\r\n * Determines if a given url is absolute\r\n *\r\n * @param url The url to check to see if it is absolute\r\n */\r\nexport function isUrlAbsolute(url) {\r\n    return /^https?:\\/\\/|^\\/\\//i.test(url);\r\n}\r\n/**\r\n * Determines if a string is null or empty or undefined\r\n *\r\n * @param s The string to test\r\n */\r\nexport function stringIsNullOrEmpty(s) {\r\n    return s === undefined || s === null || s.length < 1;\r\n}\r\n/**\r\n * Ensures guid values are represented consistently as \"ea123463-137d-4ae3-89b8-cf3fc578ca05\"\r\n *\r\n * @param guid The candidate guid\r\n */\r\nexport function sanitizeGuid(guid) {\r\n    if (stringIsNullOrEmpty(guid)) {\r\n        return guid;\r\n    }\r\n    var matches = /([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12})/i.exec(guid);\r\n    return matches === null ? guid : matches[1];\r\n}\r\n/**\r\n * Shorthand for JSON.stringify\r\n *\r\n * @param o Any type of object\r\n */\r\nexport function jsS(o) {\r\n    return JSON.stringify(o);\r\n}\r\n/**\r\n * Shorthand for Object.hasOwnProperty\r\n *\r\n * @param o Object to check for\r\n * @param p Name of the property\r\n */\r\nexport function hOP(o, p) {\r\n    return Object.hasOwnProperty.call(o, p);\r\n}\r\n/**\r\n * Generates a ~unique hash code\r\n *\r\n * From: https://stackoverflow.com/questions/6122571/simple-non-secure-hash-function-for-javascript\r\n */\r\n// tslint:disable:no-bitwise\r\nexport function getHashCode(s) {\r\n    var hash = 0;\r\n    if (s.length === 0) {\r\n        return hash;\r\n    }\r\n    for (var i = 0; i < s.length; i++) {\r\n        var chr = s.charCodeAt(i);\r\n        hash = ((hash << 5) - hash) + chr;\r\n        hash |= 0; // Convert to 32bit integer\r\n    }\r\n    return hash;\r\n}\r\n// tslint:enable:no-bitwise\r\n//# sourceMappingURL=util.js.map","import { RuntimeConfig, FetchClient, objectDefinedNotNull, } from \"@pnp/common\";\r\nexport function setup(config) {\r\n    RuntimeConfig.assign(config);\r\n}\r\nvar SPRuntimeConfigImpl = /** @class */ (function () {\r\n    function SPRuntimeConfigImpl() {\r\n    }\r\n    Object.defineProperty(SPRuntimeConfigImpl.prototype, \"headers\", {\r\n        get: function () {\r\n            var spPart = RuntimeConfig.get(\"sp\");\r\n            if (spPart !== undefined && spPart.headers !== undefined) {\r\n                return spPart.headers;\r\n            }\r\n            return {};\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SPRuntimeConfigImpl.prototype, \"baseUrl\", {\r\n        get: function () {\r\n            var spPart = RuntimeConfig.get(\"sp\");\r\n            if (spPart !== undefined && spPart.baseUrl !== undefined) {\r\n                return spPart.baseUrl;\r\n            }\r\n            if (objectDefinedNotNull(RuntimeConfig.spfxContext)) {\r\n                return RuntimeConfig.spfxContext.pageContext.web.absoluteUrl;\r\n            }\r\n            return null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SPRuntimeConfigImpl.prototype, \"fetchClientFactory\", {\r\n        get: function () {\r\n            var spPart = RuntimeConfig.get(\"sp\");\r\n            if (spPart !== undefined && spPart.fetchClientFactory !== undefined) {\r\n                return spPart.fetchClientFactory;\r\n            }\r\n            else {\r\n                return function () { return new FetchClient(); };\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SPRuntimeConfigImpl;\r\n}());\r\nexport { SPRuntimeConfigImpl };\r\nexport var SPRuntimeConfig = new SPRuntimeConfigImpl();\r\n//# sourceMappingURL=splibconfig.js.map","import { combine, isUrlAbsolute, hOP } from \"@pnp/common\";\r\nimport { SPRuntimeConfig } from \"../splibconfig\";\r\n/**\r\n * Ensures that a given url is absolute for the current web based on context\r\n *\r\n * @param candidateUrl The url to make absolute\r\n *\r\n */\r\nexport function toAbsoluteUrl(candidateUrl) {\r\n    return new Promise(function (resolve) {\r\n        if (isUrlAbsolute(candidateUrl)) {\r\n            // if we are already absolute, then just return the url\r\n            return resolve(candidateUrl);\r\n        }\r\n        if (SPRuntimeConfig.baseUrl !== null) {\r\n            // base url specified either with baseUrl of spfxContext config property\r\n            return resolve(combine(SPRuntimeConfig.baseUrl, candidateUrl));\r\n        }\r\n        if (global._spPageContextInfo !== undefined) {\r\n            // operating in classic pages\r\n            if (hOP(global._spPageContextInfo, \"webAbsoluteUrl\")) {\r\n                return resolve(combine(global._spPageContextInfo.webAbsoluteUrl, candidateUrl));\r\n            }\r\n            else if (hOP(global._spPageContextInfo, \"webServerRelativeUrl\")) {\r\n                return resolve(combine(global._spPageContextInfo.webServerRelativeUrl, candidateUrl));\r\n            }\r\n        }\r\n        // does window.location exist and have a certain path part in it?\r\n        if (global.location !== undefined) {\r\n            var baseUrl_1 = global.location.toString().toLowerCase();\r\n            [\"/_layouts/\", \"/siteassets/\"].forEach(function (s) {\r\n                var index = baseUrl_1.indexOf(s);\r\n                if (index > 0) {\r\n                    return resolve(combine(baseUrl_1.substr(0, index), candidateUrl));\r\n                }\r\n            });\r\n        }\r\n        return resolve(candidateUrl);\r\n    });\r\n}\r\n//# sourceMappingURL=toabsoluteurl.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { assign, objectDefinedNotNull } from \"./util\";\r\nexport function mergeHeaders(target, source) {\r\n    if (objectDefinedNotNull(source)) {\r\n        var temp = new Request(\"\", { headers: source });\r\n        temp.headers.forEach(function (value, name) {\r\n            target.append(name, value);\r\n        });\r\n    }\r\n}\r\nexport function mergeOptions(target, source) {\r\n    if (objectDefinedNotNull(source)) {\r\n        var headers = assign(target.headers || {}, source.headers);\r\n        target = assign(target, source);\r\n        target.headers = headers;\r\n    }\r\n}\r\n/**\r\n * Parses out the root of the request url to use as the resource when getting the token\r\n *\r\n  * @param url The url to parse\r\n */\r\nexport function getADALResource(url) {\r\n    var u = new URL(url);\r\n    return u.protocol + \"//\" + u.hostname;\r\n}\r\n/**\r\n * Makes requests using the global/window fetch API\r\n */\r\nvar FetchClient = /** @class */ (function () {\r\n    function FetchClient() {\r\n    }\r\n    FetchClient.prototype.fetch = function (url, options) {\r\n        return global.fetch(url, options);\r\n    };\r\n    return FetchClient;\r\n}());\r\nexport { FetchClient };\r\n/**\r\n * Makes requests using the fetch API adding the supplied token to the Authorization header\r\n */\r\nvar BearerTokenFetchClient = /** @class */ (function (_super) {\r\n    __extends(BearerTokenFetchClient, _super);\r\n    function BearerTokenFetchClient(_token) {\r\n        var _this = _super.call(this) || this;\r\n        _this._token = _token;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(BearerTokenFetchClient.prototype, \"token\", {\r\n        get: function () {\r\n            return this._token || \"\";\r\n        },\r\n        set: function (token) {\r\n            this._token = token;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    BearerTokenFetchClient.prototype.fetch = function (url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var headers = new Headers();\r\n        mergeHeaders(headers, options.headers);\r\n        headers.set(\"Authorization\", \"Bearer \" + this._token);\r\n        options.headers = headers;\r\n        return _super.prototype.fetch.call(this, url, options);\r\n    };\r\n    return BearerTokenFetchClient;\r\n}(FetchClient));\r\nexport { BearerTokenFetchClient };\r\n/**\r\n * Client wrapping the aadTokenProvider available from SPFx >= 1.6\r\n */\r\nvar SPFxAdalClient = /** @class */ (function (_super) {\r\n    __extends(SPFxAdalClient, _super);\r\n    /**\r\n     *\r\n     * @param context provide the appropriate SPFx Context object\r\n     */\r\n    function SPFxAdalClient(context) {\r\n        var _this = _super.call(this, null) || this;\r\n        _this.context = context;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Executes a fetch request using the supplied url and options\r\n     *\r\n     * @param url Absolute url of the request\r\n     * @param options Any options\r\n     */\r\n    SPFxAdalClient.prototype.fetch = function (url, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.getToken(getADALResource(url))];\r\n                    case 1:\r\n                        token = _a.sent();\r\n                        this.token = token;\r\n                        return [2 /*return*/, _super.prototype.fetch.call(this, url, options)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Gets an AAD token for the provided resource using the SPFx AADTokenProvider\r\n     *\r\n     * @param resource Resource for which a token is to be requested (ex: https://graph.microsoft.com)\r\n     */\r\n    SPFxAdalClient.prototype.getToken = function (resource) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var provider;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.context.aadTokenProviderFactory.getTokenProvider()];\r\n                    case 1:\r\n                        provider = _a.sent();\r\n                        return [2 /*return*/, provider.getToken(resource)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SPFxAdalClient;\r\n}(BearerTokenFetchClient));\r\nexport { SPFxAdalClient };\r\n//# sourceMappingURL=net.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { getGUID } from \"@pnp/common\";\r\nvar Batch = /** @class */ (function () {\r\n    function Batch(_batchId) {\r\n        if (_batchId === void 0) { _batchId = getGUID(); }\r\n        this._batchId = _batchId;\r\n        this._reqs = [];\r\n        this._deps = [];\r\n        this._rDeps = [];\r\n        this._index = -1;\r\n    }\r\n    Object.defineProperty(Batch.prototype, \"batchId\", {\r\n        get: function () {\r\n            return this._batchId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Batch.prototype, \"requests\", {\r\n        /**\r\n         * The requests contained in this batch\r\n         */\r\n        get: function () {\r\n            // we sort these each time this is accessed\r\n            return this._reqs.sort(function (info1, info2) { return info1.index - info2.index; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Not meant for use directly\r\n     *\r\n     * @param batchee The IQueryable for this batch to track in order\r\n     */\r\n    Batch.prototype.track = function (batchee) {\r\n        batchee.data.batch = this;\r\n        // we need to track the order requests are added to the batch to ensure we always\r\n        // operate on them in order\r\n        if (typeof batchee.data.batchIndex === \"undefined\" || batchee.data.batchIndex < 0) {\r\n            batchee.data.batchIndex = ++this._index;\r\n        }\r\n    };\r\n    /**\r\n     * Adds the given request context to the batch for execution\r\n     *\r\n     * @param context Details of the request to batch\r\n     */\r\n    Batch.prototype.add = function (context) {\r\n        var info = {\r\n            id: context.requestId,\r\n            index: context.batchIndex,\r\n            method: context.method.toUpperCase(),\r\n            options: context.options,\r\n            parser: context.parser,\r\n            reject: null,\r\n            resolve: null,\r\n            url: context.url,\r\n        };\r\n        // we create a new promise that will be resolved within the batch\r\n        var p = new Promise(function (resolve, reject) {\r\n            info.resolve = resolve;\r\n            info.reject = reject;\r\n        });\r\n        this._reqs.push(info);\r\n        return p;\r\n    };\r\n    /**\r\n     * Adds a dependency insuring that some set of actions will occur before a batch is processed.\r\n     * MUST be cleared using the returned resolve delegate to allow batches to run\r\n     */\r\n    Batch.prototype.addDependency = function () {\r\n        var resolver = function () { return void (0); };\r\n        this._deps.push(new Promise(function (resolve) {\r\n            resolver = resolve;\r\n        }));\r\n        return resolver;\r\n    };\r\n    /**\r\n     * The batch's execute method will not resolve util any promises added here resolve\r\n     *\r\n     * @param p The dependent promise\r\n     */\r\n    Batch.prototype.addResolveBatchDependency = function (p) {\r\n        this._rDeps.push(p);\r\n    };\r\n    /**\r\n     * Execute the current batch and resolve the associated promises\r\n     *\r\n     * @returns A promise which will be resolved once all of the batch's child promises have resolved\r\n     */\r\n    Batch.prototype.execute = function () {\r\n        var _this = this;\r\n        // we need to check the dependencies twice due to how different engines handle things.\r\n        // We can get a second set of promises added during the first set resolving\r\n        return Promise.all(this._deps)\r\n            .then(function () { return Promise.all(_this._deps); })\r\n            .then(function () { return _this.executeImpl(); })\r\n            .then(function () { return Promise.all(_this._rDeps); })\r\n            .then(function () { return void (0); });\r\n    };\r\n    return Batch;\r\n}());\r\nexport { Batch };\r\n//# sourceMappingURL=batch.js.map","import { RuntimeConfig, dateAdd, PnPClientStorage } from \"@pnp/common\";\r\nvar CachingOptions = /** @class */ (function () {\r\n    function CachingOptions(key, storeName, expiration) {\r\n        if (storeName === void 0) { storeName = RuntimeConfig.defaultCachingStore; }\r\n        if (expiration === void 0) { expiration = dateAdd(new Date(), \"second\", RuntimeConfig.defaultCachingTimeoutSeconds); }\r\n        this.key = key;\r\n        this.storeName = storeName;\r\n        this.expiration = expiration;\r\n    }\r\n    Object.defineProperty(CachingOptions.prototype, \"store\", {\r\n        get: function () {\r\n            if (this.storeName === \"local\") {\r\n                return CachingOptions.storage.local;\r\n            }\r\n            else {\r\n                return CachingOptions.storage.session;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CachingOptions.storage = new PnPClientStorage();\r\n    return CachingOptions;\r\n}());\r\nexport { CachingOptions };\r\nvar CachingParserWrapper = /** @class */ (function () {\r\n    function CachingParserWrapper(parser, cacheOptions) {\r\n        this.parser = parser;\r\n        this.cacheOptions = cacheOptions;\r\n    }\r\n    CachingParserWrapper.prototype.parse = function (response) {\r\n        var _this = this;\r\n        return this.parser.parse(response).then(function (r) { return _this.cacheData(r); });\r\n    };\r\n    CachingParserWrapper.prototype.cacheData = function (data) {\r\n        if (this.cacheOptions.store !== null) {\r\n            this.cacheOptions.store.put(this.cacheOptions.key, data, this.cacheOptions.expiration);\r\n        }\r\n        return data;\r\n    };\r\n    return CachingParserWrapper;\r\n}());\r\nexport { CachingParserWrapper };\r\n//# sourceMappingURL=caching.js.map","/**\r\n * Adds a property to a target instance\r\n *\r\n * @param target The object to whose prototype we will add a property\r\n * @param name Property name\r\n * @param factory Factory method used to produce the property value\r\n * @param path Any additional path required to produce the value\r\n */\r\nexport function addProp(target, name, factory, path) {\r\n    Reflect.defineProperty(target.prototype, name, {\r\n        configurable: true,\r\n        enumerable: true,\r\n        get: function () {\r\n            return factory(this, path);\r\n        },\r\n    });\r\n}\r\n//# sourceMappingURL=add-prop.js.map","import { __read, __spread } from \"tslib\";\r\nimport { isFunc, isArray } from \"@pnp/common\";\r\nvar _enableExtensions = false;\r\nvar globaExtensions = [];\r\nvar ObjExtensionsSym = Symbol(\"__extensions\");\r\n/**\r\n * Creates global extensions across all invokable objects\r\n *\r\n * @param e The global extensions to apply\r\n */\r\nexport var extendGlobal = function (e) {\r\n    _enableExtensions = true;\r\n    extendCol(globaExtensions, e);\r\n};\r\n/**\r\n * Applies the supplied extensions to a single instance\r\n *\r\n * @param target Object to which extensions are applied\r\n * @param extensions Extensions to apply\r\n */\r\nexport var extendObj = function (target, extensions) {\r\n    _enableExtensions = true;\r\n    if (!Reflect.has(target, ObjExtensionsSym)) {\r\n        Reflect.set(target, ObjExtensionsSym, []);\r\n    }\r\n    extendCol(Reflect.get(target, ObjExtensionsSym), extensions);\r\n    return target;\r\n};\r\n/**\r\n * Allows applying extensions to all instances created from the supplied factory\r\n *\r\n * @param factory The Invokable Factory method to extend\r\n * @param extensions Extensions to apply\r\n */\r\nexport var extendFactory = function (factory, extensions) {\r\n    _enableExtensions = true;\r\n    if (factory.__proto__[ObjExtensionsSym] === undefined) {\r\n        factory.__proto__[ObjExtensionsSym] = [];\r\n    }\r\n    extendCol(factory.__proto__[ObjExtensionsSym], extensions);\r\n};\r\nfunction extendCol(a, e) {\r\n    if (isArray(e)) {\r\n        // @ts-ignore\r\n        a.push.apply(a, __spread(e));\r\n    }\r\n    else {\r\n        // @ts-ignore\r\n        a.push(e);\r\n    }\r\n}\r\n/**\r\n * Clears all global extensions\r\n */\r\nexport var clearGlobalExtensions = function () {\r\n    globaExtensions.length = 0;\r\n};\r\n/**\r\n * Disables all extensions\r\n */\r\nexport var disableExtensions = function () {\r\n    _enableExtensions = false;\r\n};\r\n/**\r\n * Enables all extensions\r\n */\r\nexport var enableExtensions = function () {\r\n    _enableExtensions = true;\r\n};\r\n/**\r\n * Applies a set of extension previously applied to a factory using extendFactory to an object created from that factory\r\n *\r\n * @param factory\r\n * @param args\r\n */\r\nexport var applyFactoryExtensions = function (factory, args) {\r\n    var o = factory(args);\r\n    if (factory.__proto__[ObjExtensionsSym]) {\r\n        o = extendObj(o, factory.__proto__[ObjExtensionsSym]);\r\n    }\r\n    return o;\r\n};\r\nexport function extensionOrDefault(op, or, target) {\r\n    var rest = [];\r\n    for (var _i = 3; _i < arguments.length; _i++) {\r\n        rest[_i - 3] = arguments[_i];\r\n    }\r\n    if (_enableExtensions) {\r\n        var extensions = [];\r\n        // we need to first invoke extensions tied to only this object\r\n        if (Reflect.has(target, ObjExtensionsSym)) {\r\n            extensions.push.apply(extensions, __spread(Reflect.get(target, ObjExtensionsSym)));\r\n        }\r\n        // second we need to process any global extensions\r\n        extensions.push.apply(extensions, __spread(globaExtensions));\r\n        for (var i = 0; i < extensions.length; i++) {\r\n            var extension = extensions[i];\r\n            var result = undefined;\r\n            if (isFunc(extension)) {\r\n                // this extension is a function which we call\r\n                result = extension.apply(void 0, __spread([op, target], rest));\r\n            }\r\n            else if (op === \"get\" && Reflect.has(extension, rest[0])) {\r\n                // this extension is a named extension meaning we are overriding a specific method/property\r\n                result = Reflect.get(extension, rest[0], target);\r\n            }\r\n            else if (Reflect.has(extension, op)) {\r\n                // this extension is a ProxyHandler that has a handler defined for {op} so we pass control and see if we get a result\r\n                result = Reflect.get(extension, op).apply(void 0, __spread([target], rest));\r\n            }\r\n            if (typeof result !== \"undefined\") {\r\n                // if a extension returned a result, we return that\r\n                // this means that this extension overrides any other extensions and no more are executed\r\n                // first extension in the list to return \"wins\"\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n    return or.apply(void 0, __spread([target], rest));\r\n}\r\n//# sourceMappingURL=invokable-extensions.js.map","import { __read, __spread } from \"tslib\";\r\nimport { RuntimeConfig } from \"@pnp/common\";\r\nimport { extensionOrDefault, applyFactoryExtensions } from \"./invokable-extensions\";\r\nvar invokableBinder = function (invoker) { return function (constructor) {\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var factory = function (as) {\r\n            var r = Object.assign(function () {\r\n                var ags = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    ags[_i] = arguments[_i];\r\n                }\r\n                return invoker.apply(r, ags);\r\n            }, new (constructor.bind.apply(constructor, __spread([void 0], as)))());\r\n            Reflect.setPrototypeOf(r, constructor.prototype);\r\n            return r;\r\n        };\r\n        if (RuntimeConfig.ie11) {\r\n            return factory(args);\r\n        }\r\n        else {\r\n            return new Proxy(applyFactoryExtensions(factory, args), {\r\n                apply: function (target, _thisArg, argArray) {\r\n                    return extensionOrDefault(\"apply\", function () {\r\n                        var a = [];\r\n                        for (var _i = 0; _i < arguments.length; _i++) {\r\n                            a[_i] = arguments[_i];\r\n                        }\r\n                        return Reflect.apply(a[0], a[1], a[2]);\r\n                    }, target, _thisArg, argArray);\r\n                },\r\n                get: function (target, p, receiver) {\r\n                    return extensionOrDefault(\"get\", function () {\r\n                        var a = [];\r\n                        for (var _i = 0; _i < arguments.length; _i++) {\r\n                            a[_i] = arguments[_i];\r\n                        }\r\n                        return Reflect.get(a[0], a[1], a[2]);\r\n                    }, target, p, receiver);\r\n                },\r\n                has: function (target, p) {\r\n                    return extensionOrDefault(\"has\", function () {\r\n                        var a = [];\r\n                        for (var _i = 0; _i < arguments.length; _i++) {\r\n                            a[_i] = arguments[_i];\r\n                        }\r\n                        return Reflect.has(a[0], a[1]);\r\n                    }, target, p);\r\n                },\r\n                set: function (target, p, value, receiver) {\r\n                    return extensionOrDefault(\"set\", function () {\r\n                        var a = [];\r\n                        for (var _i = 0; _i < arguments.length; _i++) {\r\n                            a[_i] = arguments[_i];\r\n                        }\r\n                        return Reflect.set(a[0], a[1], a[2], a[3]);\r\n                    }, target, p, value, receiver);\r\n                },\r\n            });\r\n        }\r\n    };\r\n}; };\r\nexport var invokableFactory = invokableBinder(function (options) {\r\n    return this.defaultAction(options);\r\n});\r\n//# sourceMappingURL=invokable-binder.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { isFunc, hOP } from \"@pnp/common\";\r\nvar ODataParser = /** @class */ (function () {\r\n    function ODataParser() {\r\n    }\r\n    ODataParser.prototype.parse = function (r) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            if (_this.handleError(r, reject)) {\r\n                _this.parseImpl(r, resolve, reject);\r\n            }\r\n        });\r\n    };\r\n    ODataParser.prototype.parseImpl = function (r, resolve, reject) {\r\n        var _this = this;\r\n        if ((r.headers.has(\"Content-Length\") && parseFloat(r.headers.get(\"Content-Length\")) === 0) || r.status === 204) {\r\n            resolve({});\r\n        }\r\n        else {\r\n            // patch to handle cases of 200 response with no or whitespace only bodies (#487 & #545)\r\n            r.text()\r\n                .then(function (txt) { return txt.replace(/\\s/ig, \"\").length > 0 ? JSON.parse(txt) : {}; })\r\n                .then(function (json) { return resolve(_this.parseODataJSON(json)); })\r\n                .catch(function (e) { return reject(e); });\r\n        }\r\n    };\r\n    /**\r\n     * Handles a response with ok === false by parsing the body and creating a ProcessHttpClientResponseException\r\n     * which is passed to the reject delegate. This method returns true if there is no error, otherwise false\r\n     *\r\n     * @param r Current response object\r\n     * @param reject reject delegate for the surrounding promise\r\n     */\r\n    ODataParser.prototype.handleError = function (r, reject) {\r\n        if (!r.ok) {\r\n            HttpRequestError.init(r).then(reject);\r\n        }\r\n        return r.ok;\r\n    };\r\n    /**\r\n     * Normalizes the json response by removing the various nested levels\r\n     *\r\n     * @param json json object to parse\r\n     */\r\n    ODataParser.prototype.parseODataJSON = function (json) {\r\n        var result = json;\r\n        if (hOP(json, \"d\")) {\r\n            if (hOP(json.d, \"results\")) {\r\n                result = json.d.results;\r\n            }\r\n            else {\r\n                result = json.d;\r\n            }\r\n        }\r\n        else if (hOP(json, \"value\")) {\r\n            result = json.value;\r\n        }\r\n        return result;\r\n    };\r\n    return ODataParser;\r\n}());\r\nexport { ODataParser };\r\nvar TextParser = /** @class */ (function (_super) {\r\n    __extends(TextParser, _super);\r\n    function TextParser() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TextParser.prototype.parseImpl = function (r, resolve) {\r\n        r.text().then(resolve);\r\n    };\r\n    return TextParser;\r\n}(ODataParser));\r\nexport { TextParser };\r\nvar BlobParser = /** @class */ (function (_super) {\r\n    __extends(BlobParser, _super);\r\n    function BlobParser() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    BlobParser.prototype.parseImpl = function (r, resolve) {\r\n        r.blob().then(resolve);\r\n    };\r\n    return BlobParser;\r\n}(ODataParser));\r\nexport { BlobParser };\r\nvar JSONParser = /** @class */ (function (_super) {\r\n    __extends(JSONParser, _super);\r\n    function JSONParser() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    JSONParser.prototype.parseImpl = function (r, resolve) {\r\n        r.json().then(resolve);\r\n    };\r\n    return JSONParser;\r\n}(ODataParser));\r\nexport { JSONParser };\r\nvar BufferParser = /** @class */ (function (_super) {\r\n    __extends(BufferParser, _super);\r\n    function BufferParser() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    BufferParser.prototype.parseImpl = function (r, resolve) {\r\n        if (isFunc(r.arrayBuffer)) {\r\n            r.arrayBuffer().then(resolve);\r\n        }\r\n        else {\r\n            r.buffer().then(resolve);\r\n        }\r\n    };\r\n    return BufferParser;\r\n}(ODataParser));\r\nexport { BufferParser };\r\nvar LambdaParser = /** @class */ (function (_super) {\r\n    __extends(LambdaParser, _super);\r\n    function LambdaParser(parser) {\r\n        var _this = _super.call(this) || this;\r\n        _this.parser = parser;\r\n        return _this;\r\n    }\r\n    LambdaParser.prototype.parseImpl = function (r, resolve) {\r\n        this.parser(r).then(resolve);\r\n    };\r\n    return LambdaParser;\r\n}(ODataParser));\r\nexport { LambdaParser };\r\nvar HttpRequestError = /** @class */ (function (_super) {\r\n    __extends(HttpRequestError, _super);\r\n    function HttpRequestError(message, response, status, statusText) {\r\n        if (status === void 0) { status = response.status; }\r\n        if (statusText === void 0) { statusText = response.statusText; }\r\n        var _this = _super.call(this, message) || this;\r\n        _this.response = response;\r\n        _this.status = status;\r\n        _this.statusText = statusText;\r\n        _this.isHttpRequestError = true;\r\n        return _this;\r\n    }\r\n    HttpRequestError.init = function (r) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var t;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, r.clone().text()];\r\n                    case 1:\r\n                        t = _a.sent();\r\n                        return [2 /*return*/, new HttpRequestError(\"Error making HttpClient request in queryable [\" + r.status + \"] \" + r.statusText + \" ::> \" + t, r.clone())];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return HttpRequestError;\r\n}(Error));\r\nexport { HttpRequestError };\r\n//# sourceMappingURL=parsers.js.map","import { __read, __spread } from \"tslib\";\r\nimport { combine, RuntimeConfig, mergeOptions, objectDefinedNotNull, } from \"@pnp/common\";\r\nimport { ODataParser } from \"./parsers\";\r\nexport function cloneQueryableData(source) {\r\n    var s = JSON.stringify(source, function (key, value) {\r\n        switch (key) {\r\n            case \"query\":\r\n                return JSON.stringify(__spread(value));\r\n            case \"batch\":\r\n                return \"-\";\r\n            case \"batchDependency\":\r\n                return \"-\";\r\n            case \"cachingOptions\":\r\n                return \"-\";\r\n            case \"clientFactory\":\r\n                return \"-\";\r\n            case \"parser\":\r\n                return \"-\";\r\n            default:\r\n                return value;\r\n        }\r\n    }, 0);\r\n    var parsed = JSON.parse(s, function (key, value) {\r\n        switch (key) {\r\n            case \"query\":\r\n                return new Map(JSON.parse(value));\r\n            case \"batch\":\r\n                return source.batch;\r\n            case \"batchDependency\":\r\n                return source.batchDependency;\r\n            case \"cachingOptions\":\r\n                return source.cachingOptions;\r\n            case \"clientFactory\":\r\n                return source.clientFactory;\r\n            case \"parser\":\r\n                return source.parser;\r\n            default:\r\n                return value;\r\n        }\r\n    });\r\n    // this handles bodies that cannot be JSON encoded (Blob, etc)\r\n    if (source.options && source.options.body) {\r\n        parsed.options.body = source.options.body;\r\n    }\r\n    return parsed;\r\n}\r\nvar Queryable = /** @class */ (function () {\r\n    function Queryable(dataSeed) {\r\n        if (dataSeed === void 0) { dataSeed = {}; }\r\n        this._data = Object.assign({}, {\r\n            cloneParentWasCaching: false,\r\n            options: {},\r\n            parentUrl: \"\",\r\n            parser: new ODataParser(),\r\n            query: new Map(),\r\n            url: \"\",\r\n            useCaching: false,\r\n        }, cloneQueryableData(dataSeed));\r\n    }\r\n    Object.defineProperty(Queryable.prototype, \"data\", {\r\n        get: function () {\r\n            return this._data;\r\n        },\r\n        set: function (value) {\r\n            this._data = Object.assign({}, cloneQueryableData(this.data), cloneQueryableData(value));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n    * Gets the currentl url\r\n    *\r\n    */\r\n    Queryable.prototype.toUrl = function () {\r\n        return this.data.url;\r\n    };\r\n    /**\r\n     * Directly concatonates the supplied string to the current url, not normalizing \"/\" chars\r\n     *\r\n     * @param pathPart The string to concatonate to the url\r\n     */\r\n    Queryable.prototype.concat = function (pathPart) {\r\n        this.data.url += pathPart;\r\n        return this;\r\n    };\r\n    Object.defineProperty(Queryable.prototype, \"query\", {\r\n        /**\r\n         * Provides access to the query builder for this url\r\n         *\r\n         */\r\n        get: function () {\r\n            return this.data.query;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Sets custom options for current object and all derived objects accessible via chaining\r\n     *\r\n     * @param options custom options\r\n     */\r\n    Queryable.prototype.configure = function (options) {\r\n        mergeOptions(this.data.options, options);\r\n        return this;\r\n    };\r\n    /**\r\n     * Configures this instance from the configure options of the supplied instance\r\n     *\r\n     * @param o Instance from which options should be taken\r\n     */\r\n    Queryable.prototype.configureFrom = function (o) {\r\n        mergeOptions(this.data.options, o.data.options);\r\n        return this;\r\n    };\r\n    /**\r\n     * Enables caching for this request\r\n     *\r\n     * @param options Defines the options used when caching this request\r\n     */\r\n    Queryable.prototype.usingCaching = function (options) {\r\n        if (!RuntimeConfig.globalCacheDisable) {\r\n            this.data.useCaching = true;\r\n            if (options !== undefined) {\r\n                this.data.cachingOptions = options;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    Queryable.prototype.usingParser = function (parser) {\r\n        this.data.parser = parser;\r\n        return this;\r\n    };\r\n    /**\r\n     * Allows you to set a request specific processing pipeline\r\n     *\r\n     * @param pipeline The set of methods, in order, to execute a given request\r\n     */\r\n    Queryable.prototype.withPipeline = function (pipeline) {\r\n        this.data.pipes = pipeline.slice(0);\r\n        return this;\r\n    };\r\n    /**\r\n     * Appends the given string and normalizes \"/\" chars\r\n     *\r\n     * @param pathPart The string to append\r\n     */\r\n    Queryable.prototype.append = function (pathPart) {\r\n        this.data.url = combine(this.data.url, pathPart);\r\n    };\r\n    /**\r\n     * Adds this query to the supplied batch\r\n     *\r\n     * @example\r\n     * ```\r\n     *\r\n     * let b = pnp.sp.createBatch();\r\n     * pnp.sp.web.inBatch(b).get().then(...);\r\n     * b.execute().then(...)\r\n     * ```\r\n     */\r\n    Queryable.prototype.inBatch = function (batch) {\r\n        if (this.hasBatch) {\r\n            throw Error(\"This query is already part of a batch.\");\r\n        }\r\n        if (objectDefinedNotNull(batch)) {\r\n            batch.track(this);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Blocks a batch call from occuring, MUST be cleared by calling the returned function\r\n    */\r\n    Queryable.prototype.addBatchDependency = function () {\r\n        if (objectDefinedNotNull(this.data.batch)) {\r\n            return this.data.batch.addDependency();\r\n        }\r\n        return function () { return null; };\r\n    };\r\n    Object.defineProperty(Queryable.prototype, \"hasBatch\", {\r\n        /**\r\n         * Indicates if the current query has a batch associated\r\n         *\r\n         */\r\n        get: function () {\r\n            return objectDefinedNotNull(this.data.batch);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Queryable.prototype, \"batch\", {\r\n        /**\r\n         * The batch currently associated with this query or null\r\n         *\r\n         */\r\n        get: function () {\r\n            return this.hasBatch ? this.data.batch : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Queryable.prototype, \"parentUrl\", {\r\n        /**\r\n         * Gets the parent url used when creating this instance\r\n         *\r\n         */\r\n        get: function () {\r\n            return this.data.parentUrl;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Clones this instance's data to target\r\n     *\r\n     * @param target Instance to which data is written\r\n     * @param settings [Optional] Settings controlling how clone is applied\r\n     */\r\n    Queryable.prototype.cloneTo = function (target, settings) {\r\n        if (settings === void 0) { settings = { includeBatch: true }; }\r\n        target.data = Object.assign({}, cloneQueryableData(this.data), {\r\n            batch: null,\r\n            cloneParentCacheOptions: null,\r\n            cloneParentWasCaching: false,\r\n        }, cloneQueryableData(target.data));\r\n        target.configureFrom(this);\r\n        if (settings.includeBatch) {\r\n            target.inBatch(this.batch);\r\n        }\r\n        if (this.data.useCaching) {\r\n            target.data.cloneParentWasCaching = true;\r\n            target.data.cloneParentCacheOptions = this.data.cachingOptions;\r\n        }\r\n        return target;\r\n    };\r\n    return Queryable;\r\n}());\r\nexport { Queryable };\r\n//# sourceMappingURL=queryable.js.map","/**\r\n * Class used to subscribe ILogListener and log messages throughout an application\r\n *\r\n */\r\nvar Logger = /** @class */ (function () {\r\n    function Logger() {\r\n    }\r\n    Object.defineProperty(Logger, \"activeLogLevel\", {\r\n        /**\r\n         * Gets or sets the active log level to apply for log filtering\r\n         */\r\n        get: function () {\r\n            return Logger.instance.activeLogLevel;\r\n        },\r\n        set: function (value) {\r\n            Logger.instance.activeLogLevel = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Logger, \"instance\", {\r\n        get: function () {\r\n            if (Logger._instance === undefined || Logger._instance === null) {\r\n                Logger._instance = new LoggerImpl();\r\n            }\r\n            return Logger._instance;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds ILogListener instances to the set of subscribed listeners\r\n     *\r\n     * @param listeners One or more listeners to subscribe to this log\r\n     */\r\n    Logger.subscribe = function () {\r\n        var listeners = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            listeners[_i] = arguments[_i];\r\n        }\r\n        listeners.forEach(function (listener) { return Logger.instance.subscribe(listener); });\r\n    };\r\n    /**\r\n     * Clears the subscribers collection, returning the collection before modification\r\n     */\r\n    Logger.clearSubscribers = function () {\r\n        return Logger.instance.clearSubscribers();\r\n    };\r\n    Object.defineProperty(Logger, \"count\", {\r\n        /**\r\n         * Gets the current subscriber count\r\n         */\r\n        get: function () {\r\n            return Logger.instance.count;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Writes the supplied string to the subscribed listeners\r\n     *\r\n     * @param message The message to write\r\n     * @param level [Optional] if supplied will be used as the level of the entry (Default: LogLevel.Info)\r\n     */\r\n    Logger.write = function (message, level) {\r\n        if (level === void 0) { level = 1 /* Info */; }\r\n        Logger.instance.log({ level: level, message: message });\r\n    };\r\n    /**\r\n     * Writes the supplied string to the subscribed listeners\r\n     *\r\n     * @param json The json object to stringify and write\r\n     * @param level [Optional] if supplied will be used as the level of the entry (Default: LogLevel.Info)\r\n     */\r\n    Logger.writeJSON = function (json, level) {\r\n        if (level === void 0) { level = 1 /* Info */; }\r\n        this.write(JSON.stringify(json), level);\r\n    };\r\n    /**\r\n     * Logs the supplied entry to the subscribed listeners\r\n     *\r\n     * @param entry The message to log\r\n     */\r\n    Logger.log = function (entry) {\r\n        Logger.instance.log(entry);\r\n    };\r\n    /**\r\n     * Logs an error object to the subscribed listeners\r\n     *\r\n     * @param err The error object\r\n     */\r\n    Logger.error = function (err) {\r\n        Logger.instance.log({ data: err, level: 3 /* Error */, message: err.message });\r\n    };\r\n    return Logger;\r\n}());\r\nexport { Logger };\r\nvar LoggerImpl = /** @class */ (function () {\r\n    function LoggerImpl(activeLogLevel, subscribers) {\r\n        if (activeLogLevel === void 0) { activeLogLevel = 2 /* Warning */; }\r\n        if (subscribers === void 0) { subscribers = []; }\r\n        this.activeLogLevel = activeLogLevel;\r\n        this.subscribers = subscribers;\r\n    }\r\n    LoggerImpl.prototype.subscribe = function (listener) {\r\n        this.subscribers.push(listener);\r\n    };\r\n    LoggerImpl.prototype.clearSubscribers = function () {\r\n        var s = this.subscribers.slice(0);\r\n        this.subscribers.length = 0;\r\n        return s;\r\n    };\r\n    Object.defineProperty(LoggerImpl.prototype, \"count\", {\r\n        get: function () {\r\n            return this.subscribers.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LoggerImpl.prototype.write = function (message, level) {\r\n        if (level === void 0) { level = 1 /* Info */; }\r\n        this.log({ level: level, message: message });\r\n    };\r\n    LoggerImpl.prototype.log = function (entry) {\r\n        if (entry !== undefined && this.activeLogLevel <= entry.level) {\r\n            this.subscribers.map(function (subscriber) { return subscriber.log(entry); });\r\n        }\r\n    };\r\n    return LoggerImpl;\r\n}());\r\n/**\r\n * A set of logging levels\r\n */\r\nexport var LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Verbose\"] = 0] = \"Verbose\";\r\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\r\n    LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\r\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\r\n    LogLevel[LogLevel[\"Off\"] = 99] = \"Off\";\r\n})(LogLevel || (LogLevel = {}));\r\n//# sourceMappingURL=logger.js.map","/**\r\n * Implementation of LogListener which logs to the console\r\n *\r\n */\r\nvar ConsoleListener = /** @class */ (function () {\r\n    function ConsoleListener() {\r\n    }\r\n    /**\r\n     * Any associated data that a given logging listener may choose to log or ignore\r\n     *\r\n     * @param entry The information to be logged\r\n     */\r\n    ConsoleListener.prototype.log = function (entry) {\r\n        var msg = this.format(entry);\r\n        switch (entry.level) {\r\n            case 0 /* Verbose */:\r\n            case 1 /* Info */:\r\n                console.log(msg);\r\n                break;\r\n            case 2 /* Warning */:\r\n                console.warn(msg);\r\n                break;\r\n            case 3 /* Error */:\r\n                console.error(msg);\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Formats the message\r\n     *\r\n     * @param entry The information to format into a string\r\n     */\r\n    ConsoleListener.prototype.format = function (entry) {\r\n        var msg = [];\r\n        msg.push(\"Message: \" + entry.message);\r\n        if (entry.data !== undefined) {\r\n            try {\r\n                msg.push(\" Data: \" + JSON.stringify(entry.data));\r\n            }\r\n            catch (e) {\r\n                msg.push(\" Data: Error in stringify of supplied data \" + e);\r\n            }\r\n        }\r\n        return msg.join(\"\");\r\n    };\r\n    return ConsoleListener;\r\n}());\r\nexport { ConsoleListener };\r\n/**\r\n * Implementation of LogListener which logs to the supplied function\r\n *\r\n */\r\nvar FunctionListener = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of the FunctionListener class\r\n     *\r\n     * @constructor\r\n     * @param  method The method to which any logging data will be passed\r\n     */\r\n    function FunctionListener(method) {\r\n        this.method = method;\r\n    }\r\n    /**\r\n     * Any associated data that a given logging listener may choose to log or ignore\r\n     *\r\n     * @param entry The information to be logged\r\n     */\r\n    FunctionListener.prototype.log = function (entry) {\r\n        this.method(entry);\r\n    };\r\n    return FunctionListener;\r\n}());\r\nexport { FunctionListener };\r\n//# sourceMappingURL=listeners.js.map","import { __decorate } from \"tslib\";\r\nimport { assign, isFunc, hOP } from \"@pnp/common\";\r\nimport { Logger } from \"@pnp/logging\";\r\nimport { CachingOptions, CachingParserWrapper } from \"./caching\";\r\n/**\r\n * Resolves the context's result value\r\n *\r\n * @param context The current context\r\n */\r\nfunction returnResult(context) {\r\n    Logger.log({\r\n        data: Logger.activeLogLevel === 0 /* Verbose */ ? context.result : {},\r\n        level: 1 /* Info */,\r\n        message: \"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Returning result from pipeline. Set logging to verbose to see data.\",\r\n    });\r\n    return Promise.resolve(context.result);\r\n}\r\n/**\r\n * Sets the result on the context\r\n */\r\nexport function setResult(context, value) {\r\n    return new Promise(function (resolve) {\r\n        context.result = value;\r\n        context.hasResult = true;\r\n        resolve(context);\r\n    });\r\n}\r\n/**\r\n * Invokes the next method in the provided context's pipeline\r\n *\r\n * @param c The current request context\r\n */\r\nfunction next(c) {\r\n    return c.pipes.length > 0 ? c.pipes.shift()(c) : Promise.resolve(c);\r\n}\r\n/**\r\n * Executes the current request context's pipeline\r\n *\r\n * @param context Current context\r\n */\r\nexport function pipe(context) {\r\n    if (context.pipes.length < 1) {\r\n        Logger.write(\"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Request pipeline contains no methods!\", 3 /* Error */);\r\n        throw Error(\"Request pipeline contains no methods!\");\r\n    }\r\n    var promise = next(context).then(function (ctx) { return returnResult(ctx); }).catch(function (e) {\r\n        Logger.error(e);\r\n        throw e;\r\n    });\r\n    if (context.isBatched) {\r\n        // this will block the batch's execute method from returning until the child requets have been resolved\r\n        context.batch.addResolveBatchDependency(promise);\r\n    }\r\n    return promise;\r\n}\r\n/**\r\n * decorator factory applied to methods in the pipeline to control behavior\r\n */\r\nexport function requestPipelineMethod(alwaysRun) {\r\n    if (alwaysRun === void 0) { alwaysRun = false; }\r\n    return function (target, propertyKey, descriptor) {\r\n        var method = descriptor.value;\r\n        descriptor.value = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            // if we have a result already in the pipeline, pass it along and don't call the tagged method\r\n            if (!alwaysRun && args.length > 0 && hOP(args[0], \"hasResult\") && args[0].hasResult) {\r\n                Logger.write(\"[\" + args[0].requestId + \"] (\" + (new Date()).getTime() + \") Skipping request pipeline method \" + propertyKey + \", existing result in pipeline.\", 0 /* Verbose */);\r\n                return Promise.resolve(args[0]);\r\n            }\r\n            // apply the tagged method\r\n            Logger.write(\"[\" + args[0].requestId + \"] (\" + (new Date()).getTime() + \") Calling request pipeline method \" + propertyKey + \".\", 0 /* Verbose */);\r\n            // then chain the next method in the context's pipeline - allows for dynamic pipeline\r\n            return method.apply(target, args).then(function (ctx) { return next(ctx); });\r\n        };\r\n    };\r\n}\r\n/**\r\n * Contains the methods used within the request pipeline\r\n */\r\nvar PipelineMethods = /** @class */ (function () {\r\n    function PipelineMethods() {\r\n    }\r\n    /**\r\n     * Logs the start of the request\r\n     */\r\n    PipelineMethods.logStart = function (context) {\r\n        return new Promise(function (resolve) {\r\n            Logger.log({\r\n                data: Logger.activeLogLevel === 1 /* Info */ ? {} : context,\r\n                level: 1 /* Info */,\r\n                message: \"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Beginning \" + context.method + \" request (\" + context.url + \")\",\r\n            });\r\n            resolve(context);\r\n        });\r\n    };\r\n    /**\r\n     * Handles caching of the request\r\n     */\r\n    PipelineMethods.caching = function (context) {\r\n        return new Promise(function (resolve) {\r\n            // handle caching, if applicable\r\n            if (context.useCaching) {\r\n                Logger.write(\"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Caching is enabled for request, checking cache...\", 1 /* Info */);\r\n                var cacheOptions = new CachingOptions(context.url.toLowerCase());\r\n                if (context.cachingOptions !== undefined) {\r\n                    cacheOptions = assign(cacheOptions, context.cachingOptions);\r\n                }\r\n                // we may not have a valid store\r\n                if (cacheOptions.store !== null) {\r\n                    // check if we have the data in cache and if so resolve the promise and return\r\n                    var data = cacheOptions.store.get(cacheOptions.key);\r\n                    if (data !== null) {\r\n                        Logger.log({\r\n                            data: Logger.activeLogLevel === 1 /* Info */ ? {} : data,\r\n                            level: 1 /* Info */,\r\n                            message: \"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Value returned from cache.\",\r\n                        });\r\n                        // ensure we clear any held batch dependency we are resolving from the cache\r\n                        if (isFunc(context.batchDependency)) {\r\n                            context.batchDependency();\r\n                        }\r\n                        // handle the case where a parser needs to take special actions with a cached result\r\n                        if (hOP(context.parser, \"hydrate\")) {\r\n                            data = context.parser.hydrate(data);\r\n                        }\r\n                        return setResult(context, data).then(function (ctx) { return resolve(ctx); });\r\n                    }\r\n                }\r\n                Logger.write(\"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Value not found in cache.\", 1 /* Info */);\r\n                // if we don't then wrap the supplied parser in the caching parser wrapper\r\n                // and send things on their way\r\n                context.parser = new CachingParserWrapper(context.parser, cacheOptions);\r\n            }\r\n            return resolve(context);\r\n        });\r\n    };\r\n    /**\r\n     * Sends the request\r\n     */\r\n    PipelineMethods.send = function (context) {\r\n        return new Promise(function (resolve, reject) {\r\n            // send or batch the request\r\n            if (context.isBatched) {\r\n                var p = context.batch.add(context);\r\n                // we release the dependency here to ensure the batch does not execute until the request is added to the batch\r\n                if (isFunc(context.batchDependency)) {\r\n                    context.batchDependency();\r\n                }\r\n                Logger.write(\"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Batching request in batch \" + context.batch.batchId + \".\", 1 /* Info */);\r\n                // we set the result as the promise which will be resolved by the batch's execution\r\n                resolve(setResult(context, p));\r\n            }\r\n            else {\r\n                Logger.write(\"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Sending request.\", 1 /* Info */);\r\n                // we are not part of a batch, so proceed as normal\r\n                var client = context.clientFactory();\r\n                var opts = assign(context.options || {}, { method: context.method });\r\n                client.fetch(context.url, opts)\r\n                    .then(function (response) { return context.parser.parse(response); })\r\n                    .then(function (result) { return setResult(context, result); })\r\n                    .then(function (ctx) { return resolve(ctx); })\r\n                    .catch(function (e) { return reject(e); });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Logs the end of the request\r\n     */\r\n    PipelineMethods.logEnd = function (context) {\r\n        return new Promise(function (resolve) {\r\n            if (context.isBatched) {\r\n                Logger.log({\r\n                    data: Logger.activeLogLevel === 1 /* Info */ ? {} : context,\r\n                    level: 1 /* Info */,\r\n                    message: \"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") \" + context.method + \" request will complete in batch \" + context.batch.batchId + \".\",\r\n                });\r\n            }\r\n            else {\r\n                Logger.log({\r\n                    data: Logger.activeLogLevel === 1 /* Info */ ? {} : context,\r\n                    level: 1 /* Info */,\r\n                    message: \"[\" + context.requestId + \"] (\" + (new Date()).getTime() + \") Completing \" + context.method + \" request.\",\r\n                });\r\n            }\r\n            resolve(context);\r\n        });\r\n    };\r\n    __decorate([\r\n        requestPipelineMethod(true)\r\n    ], PipelineMethods, \"logStart\", null);\r\n    __decorate([\r\n        requestPipelineMethod()\r\n    ], PipelineMethods, \"caching\", null);\r\n    __decorate([\r\n        requestPipelineMethod()\r\n    ], PipelineMethods, \"send\", null);\r\n    __decorate([\r\n        requestPipelineMethod(true)\r\n    ], PipelineMethods, \"logEnd\", null);\r\n    return PipelineMethods;\r\n}());\r\nexport { PipelineMethods };\r\nexport function getDefaultPipeline() {\r\n    return [\r\n        PipelineMethods.logStart,\r\n        PipelineMethods.caching,\r\n        PipelineMethods.send,\r\n        PipelineMethods.logEnd,\r\n    ].slice(0);\r\n}\r\n//# sourceMappingURL=pipeline.js.map","import { ODataParser } from \"./parsers\";\r\nimport { getGUID, objectDefinedNotNull } from \"@pnp/common\";\r\nimport { cloneQueryableData } from \"./queryable\";\r\nimport { pipe, getDefaultPipeline } from \"./pipeline\";\r\n// first we bind the pipeline we will use for all requests within this closure\r\nexport function pipelineBinder(pipes) {\r\n    // then we bind the client factory we'll use (typically done in an implementing library such as sp)\r\n    return function (clientFactory) {\r\n        // then we create a binder we can apply for each type of method (GET, POST, etc.)\r\n        return function (method) {\r\n            // finally we get a function back to which we can pass an IQueryableData instance and execute the request it defines\r\n            return function (o) {\r\n                // send the IQueryableData down the pipeline\r\n                return pipe(Object.assign({}, {\r\n                    batch: null,\r\n                    batchDependency: null,\r\n                    batchIndex: -1,\r\n                    cachingOptions: null,\r\n                    clientFactory: clientFactory,\r\n                    cloneParentCacheOptions: null,\r\n                    cloneParentWasCaching: false,\r\n                    hasResult: false,\r\n                    isBatched: objectDefinedNotNull(o.batch),\r\n                    method: method,\r\n                    options: null,\r\n                    parentUrl: \"\",\r\n                    parser: new ODataParser(),\r\n                    pipes: pipes.slice(0),\r\n                    query: new Map(),\r\n                    requestId: getGUID(),\r\n                    url: \"\",\r\n                    useCaching: /^get$/i.test(o.method) && o.useCaching,\r\n                }, cloneQueryableData(o)));\r\n            };\r\n        };\r\n    };\r\n}\r\nexport var defaultPipelineBinder = pipelineBinder(getDefaultPipeline());\r\n//# sourceMappingURL=pipeline-binder.js.map","import { jsS } from \"@pnp/common\";\r\nexport function body(o, previous) {\r\n    return Object.assign({ body: jsS(o) }, previous);\r\n}\r\nexport function headers(o, previous) {\r\n    return Object.assign({ headers: o }, previous);\r\n}\r\n//# sourceMappingURL=request-builders.js.map","export function metadata(type) {\r\n    return {\r\n        \"__metadata\": { \"type\": type },\r\n    };\r\n}\r\n//# sourceMappingURL=metadata.js.map","import { stringIsNullOrEmpty } from \"@pnp/common\";\r\nexport function extractWebUrl(candidateUrl) {\r\n    if (stringIsNullOrEmpty(candidateUrl)) {\r\n        return \"\";\r\n    }\r\n    var index = candidateUrl.indexOf(\"_api/\");\r\n    if (index < 0) {\r\n        index = candidateUrl.indexOf(\"_vti_bin/\");\r\n    }\r\n    if (index > -1) {\r\n        return candidateUrl.substr(0, index);\r\n    }\r\n    // if all else fails just give them what they gave us back\r\n    return candidateUrl;\r\n}\r\n//# sourceMappingURL=extractweburl.js.map","import { __awaiter, __generator } from \"tslib\";\r\nimport { stringIsNullOrEmpty } from \"@pnp/common\";\r\nimport { headers } from \"@pnp/odata\";\r\n/**\r\n * Includes this method name in the X-ClientService-ClientTag used to record pnpjs usage\r\n *\r\n * @param name Method name, displayed in the\r\n */\r\nexport function tag(name) {\r\n    return function (target, key, descriptor) {\r\n        if (descriptor === undefined) {\r\n            descriptor = Object.getOwnPropertyDescriptor(target, key);\r\n        }\r\n        var originalMethod = descriptor.value;\r\n        descriptor.value = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    this.configure(headers({ \"X-PnPjs-Tracking\": name }));\r\n                    return [2 /*return*/, originalMethod.apply(this, args)];\r\n                });\r\n            });\r\n        };\r\n        return descriptor;\r\n    };\r\n}\r\ntag.getClientTag = function (h, deleteFromCollection) {\r\n    if (deleteFromCollection === void 0) { deleteFromCollection = true; }\r\n    if (h.has(\"X-PnPjs-Tracking\")) {\r\n        var methodName = h.get(\"X-PnPjs-Tracking\");\r\n        if (deleteFromCollection) {\r\n            h.delete(\"X-PnPjs-Tracking\");\r\n        }\r\n        if (!stringIsNullOrEmpty(methodName)) {\r\n            return methodName;\r\n        }\r\n    }\r\n    return \"\";\r\n};\r\ntag.configure = function (o, name) {\r\n    return o.configure(headers({ \"X-PnPjs-Tracking\": name }));\r\n};\r\ntag.isTagged = function (o) {\r\n    return o.data.options.headers && o.data.options.headers[\"X-PnPjs-Tracking\"];\r\n};\r\n//# sourceMappingURL=telemetry.js.map","import { __awaiter, __generator } from \"tslib\";\r\nimport { assign, mergeHeaders, getCtxCallback, combine, dateAdd, } from \"@pnp/common\";\r\nimport { SPRuntimeConfig } from \"./splibconfig\";\r\nimport { extractWebUrl } from \"./utils/extractweburl\";\r\nimport { tag } from \"./telemetry\";\r\nimport { ODataParser } from \"@pnp/odata\";\r\nvar SPHttpClient = /** @class */ (function () {\r\n    function SPHttpClient(_impl) {\r\n        if (_impl === void 0) { _impl = SPRuntimeConfig.fetchClientFactory(); }\r\n        this._impl = _impl;\r\n        this._digestCache = getDigestFactory(this);\r\n    }\r\n    SPHttpClient.prototype.fetch = function (url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var opts, headers, methodName, clientTag, digest;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        opts = assign(options, { cache: \"no-cache\", credentials: \"same-origin\" }, true);\r\n                        headers = new Headers();\r\n                        // first we add the global headers so they can be overwritten by any passed in locally to this call\r\n                        mergeHeaders(headers, SPRuntimeConfig.headers);\r\n                        // second we add the local options so we can overwrite the globals\r\n                        mergeHeaders(headers, options.headers);\r\n                        // lastly we apply any default headers we need that may not exist\r\n                        if (!headers.has(\"Accept\")) {\r\n                            headers.append(\"Accept\", \"application/json\");\r\n                        }\r\n                        if (!headers.has(\"Content-Type\")) {\r\n                            headers.append(\"Content-Type\", \"application/json;odata=verbose;charset=utf-8\");\r\n                        }\r\n                        if (!headers.has(\"X-ClientService-ClientTag\")) {\r\n                            methodName = tag.getClientTag(headers);\r\n                            clientTag = \"PnPCoreJS:2.0.3:\" + methodName;\r\n                            if (clientTag.length > 32) {\r\n                                clientTag = clientTag.substr(0, 32);\r\n                            }\r\n                            headers.append(\"X-ClientService-ClientTag\", clientTag);\r\n                        }\r\n                        if (!headers.has(\"User-Agent\")) {\r\n                            // this marks the requests for understanding by the service\r\n                            // does not work in browsers\r\n                            headers.append(\"User-Agent\", \"NONISV|SharePointPnP|PnPjs/2.0.3\");\r\n                        }\r\n                        opts = assign(opts, { headers: headers });\r\n                        if (!(opts.method && opts.method.toUpperCase() !== \"GET\" && !headers.has(\"X-RequestDigest\") && !headers.has(\"Authorization\"))) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this._digestCache(extractWebUrl(url))];\r\n                    case 1:\r\n                        digest = _a.sent();\r\n                        headers.append(\"X-RequestDigest\", digest);\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, this.fetchRaw(url, opts)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SPHttpClient.prototype.fetchRaw = function (url, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        // here we need to normalize the headers\r\n        var rawHeaders = new Headers();\r\n        mergeHeaders(rawHeaders, options.headers);\r\n        options = assign(options, { headers: rawHeaders });\r\n        var retry = function (ctx) {\r\n            // handles setting the proper timeout for a retry\r\n            var setRetry = function (response) {\r\n                var delay;\r\n                if (response.headers.has(\"Retry-After\")) {\r\n                    // if we have gotten a header, use that value as the delay value\r\n                    delay = parseInt(response.headers.get(\"Retry-After\"), 10);\r\n                }\r\n                else {\r\n                    // grab our current delay\r\n                    delay = ctx.delay;\r\n                    // Increment our counters.\r\n                    ctx.delay *= 2;\r\n                }\r\n                ctx.attempts++;\r\n                // If we have exceeded the retry count, reject.\r\n                if (ctx.retryCount <= ctx.attempts) {\r\n                    ctx.reject(Error(\"Retry count exceeded (\" + ctx.retryCount + \") for request. Response status: [\" + response.status + \"] \" + response.statusText));\r\n                }\r\n                else {\r\n                    // Set our retry timeout for {delay} milliseconds.\r\n                    setTimeout(getCtxCallback(_this, retry, ctx), delay);\r\n                }\r\n            };\r\n            // send the actual request\r\n            _this._impl.fetch(url, options).then(function (response) {\r\n                if (response.status === 429) {\r\n                    // we have been throttled\r\n                    setRetry(response);\r\n                }\r\n                else {\r\n                    ctx.resolve(response);\r\n                }\r\n            }).catch(function (response) {\r\n                if (response.status === 503 || response.status === 504) {\r\n                    // http status code 503 or 504, we can retry this\r\n                    setRetry(response);\r\n                }\r\n                else {\r\n                    ctx.reject(response);\r\n                }\r\n            });\r\n        };\r\n        return new Promise(function (resolve, reject) {\r\n            retry.call(_this, {\r\n                attempts: 0,\r\n                delay: 100,\r\n                reject: reject,\r\n                resolve: resolve,\r\n                retryCount: 7,\r\n            });\r\n        });\r\n    };\r\n    SPHttpClient.prototype.get = function (url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var opts = assign(options, { method: \"GET\" });\r\n        return this.fetch(url, opts);\r\n    };\r\n    SPHttpClient.prototype.post = function (url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var opts = assign(options, { method: \"POST\" });\r\n        return this.fetch(url, opts);\r\n    };\r\n    SPHttpClient.prototype.patch = function (url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var opts = assign(options, { method: \"PATCH\" });\r\n        return this.fetch(url, opts);\r\n    };\r\n    SPHttpClient.prototype.delete = function (url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var opts = assign(options, { method: \"DELETE\" });\r\n        return this.fetch(url, opts);\r\n    };\r\n    return SPHttpClient;\r\n}());\r\nexport { SPHttpClient };\r\n// allows for the caching of digests across all HttpClient's which each have their own DigestCache wrapper.\r\nvar digests = new Map();\r\nfunction getDigestFactory(client) {\r\n    var _this = this;\r\n    return function (webUrl) { return __awaiter(_this, void 0, void 0, function () {\r\n        var cachedDigest, now, url, headers, resp, parsed, newCachedDigest;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    cachedDigest = digests.get(webUrl);\r\n                    if (cachedDigest !== undefined) {\r\n                        now = new Date();\r\n                        if (now < cachedDigest.expiration) {\r\n                            return [2 /*return*/, cachedDigest.value];\r\n                        }\r\n                    }\r\n                    url = combine(webUrl, \"/_api/contextinfo\");\r\n                    headers = {\r\n                        \"Accept\": \"application/json;odata=verbose\",\r\n                        \"Content-Type\": \"application/json;odata=verbose;charset=utf-8\",\r\n                    };\r\n                    return [4 /*yield*/, client.fetchRaw(url, {\r\n                            cache: \"no-cache\",\r\n                            credentials: \"same-origin\",\r\n                            headers: assign(headers, SPRuntimeConfig.headers, true),\r\n                            method: \"POST\",\r\n                        })];\r\n                case 1:\r\n                    resp = _a.sent();\r\n                    return [4 /*yield*/, (new ODataParser()).parse(resp).then(function (r) { return r.GetContextWebInformation; })];\r\n                case 2:\r\n                    parsed = _a.sent();\r\n                    newCachedDigest = {\r\n                        expiration: dateAdd(new Date(), \"second\", parsed.FormDigestTimeoutSeconds),\r\n                        value: parsed.FormDigestValue,\r\n                    };\r\n                    digests.set(webUrl, newCachedDigest);\r\n                    return [2 /*return*/, newCachedDigest.value];\r\n            }\r\n        });\r\n    }); };\r\n}\r\n//# sourceMappingURL=sphttpclient.js.map","import { __awaiter, __generator } from \"tslib\";\r\nimport { defaultPipelineBinder, cloneQueryableData, headers } from \"@pnp/odata\";\r\nimport { SPHttpClient } from \"./sphttpclient\";\r\nimport { mergeOptions, objectDefinedNotNull } from \"@pnp/common\";\r\nimport { toAbsoluteUrl } from \"./utils/toabsoluteurl\";\r\nvar spClientBinder = defaultPipelineBinder(function () { return new SPHttpClient(); });\r\nvar send = function (method) {\r\n    var operation = spClientBinder(method);\r\n    return function (o, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, batchDependency, url;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        data = cloneQueryableData(o.data);\r\n                        batchDependency = objectDefinedNotNull(data.batch) ? data.batch.addDependency() : function () { return; };\r\n                        return [4 /*yield*/, toAbsoluteUrl(o.toUrlAndQuery())];\r\n                    case 1:\r\n                        url = _a.sent();\r\n                        mergeOptions(data.options, options);\r\n                        return [2 /*return*/, operation(Object.assign({}, data, {\r\n                                batchDependency: batchDependency,\r\n                                url: url,\r\n                            }))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n};\r\nexport var spGet = function (o, options) {\r\n    // Fix for #304 - when we clone objects we in some cases then execute a get request\r\n    // in these cases the caching settings were getting dropped from the request\r\n    // this tracks if the object from which this was cloned was caching and applies that to an immediate get request\r\n    // does not affect objects cloned from this as we are using different fields to track the settings so it won't\r\n    // be triggered\r\n    if (o.data.cloneParentWasCaching) {\r\n        o.usingCaching(o.data.cloneParentCacheOptions);\r\n    }\r\n    // if we are forcing caching set that in the data here\r\n    if (o._forceCaching) {\r\n        o.data.useCaching = true;\r\n    }\r\n    return send(\"GET\")(o, options);\r\n};\r\nexport var spPost = send(\"POST\");\r\nexport var spDelete = send(\"DELETE\");\r\nexport var spPatch = send(\"PATCH\");\r\nexport var spPostDelete = function (o, options) {\r\n    var opts = Object.assign(headers({ \"X-HTTP-Method\": \"DELETE\" }), options);\r\n    return spPost(o, opts);\r\n};\r\nexport var spPostDeleteETag = function (o, options, eTag) {\r\n    if (eTag === void 0) { eTag = \"*\"; }\r\n    var opts = Object.assign(headers({ \"X-HTTP-Method\": \"DELETE\", \"IF-Match\": eTag }), options);\r\n    return spPost(o, opts);\r\n};\r\n//# sourceMappingURL=operations.js.map","import { __extends } from \"tslib\";\r\nimport { combine, isUrlAbsolute, assign, jsS } from \"@pnp/common\";\r\nimport { Queryable, invokableFactory } from \"@pnp/odata\";\r\nimport { Logger } from \"@pnp/logging\";\r\nimport { metadata } from \"./utils/metadata\";\r\nimport { spGet, spPost, spPostDelete, spPostDeleteETag } from \"./operations\";\r\nimport { tag } from \"./telemetry\";\r\nexport var spInvokableFactory = function (f) {\r\n    return invokableFactory(f);\r\n};\r\n/**\r\n * SharePointQueryable Base Class\r\n *\r\n */\r\nvar _SharePointQueryable = /** @class */ (function (_super) {\r\n    __extends(_SharePointQueryable, _super);\r\n    /**\r\n     * Creates a new instance of the SharePointQueryable class\r\n     *\r\n     * @constructor\r\n     * @param baseUrl A string or SharePointQueryable that should form the base part of the url\r\n     *\r\n     */\r\n    function _SharePointQueryable(baseUrl, path) {\r\n        var _this = this;\r\n        var url = \"\";\r\n        var parentUrl = \"\";\r\n        var query = new Map();\r\n        if (typeof baseUrl === \"string\") {\r\n            // we need to do some extra parsing to get the parent url correct if we are\r\n            // being created from just a string.\r\n            if (isUrlAbsolute(baseUrl) || baseUrl.lastIndexOf(\"/\") < 0) {\r\n                parentUrl = baseUrl;\r\n                url = combine(baseUrl, path);\r\n            }\r\n            else if (baseUrl.lastIndexOf(\"/\") > baseUrl.lastIndexOf(\"(\")) {\r\n                // .../items(19)/fields\r\n                var index = baseUrl.lastIndexOf(\"/\");\r\n                parentUrl = baseUrl.slice(0, index);\r\n                path = combine(baseUrl.slice(index), path);\r\n                url = combine(parentUrl, path);\r\n            }\r\n            else {\r\n                // .../items(19)\r\n                var index = baseUrl.lastIndexOf(\"(\");\r\n                parentUrl = baseUrl.slice(0, index);\r\n                url = combine(baseUrl, path);\r\n            }\r\n        }\r\n        else {\r\n            parentUrl = baseUrl.toUrl();\r\n            url = combine(parentUrl, path || \"\");\r\n            var target = baseUrl.query.get(\"@target\");\r\n            if (target !== undefined) {\r\n                query.set(\"@target\", target);\r\n            }\r\n        }\r\n        // init base with correct values for data seed\r\n        _this = _super.call(this, {\r\n            parentUrl: parentUrl,\r\n            query: query,\r\n            url: url,\r\n        }) || this;\r\n        // post init actions\r\n        if (typeof baseUrl !== \"string\") {\r\n            _this.configureFrom(baseUrl);\r\n        }\r\n        _this._forceCaching = false;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Gets the full url with query information\r\n     */\r\n    _SharePointQueryable.prototype.toUrlAndQuery = function () {\r\n        var aliasedParams = new Map(this.query);\r\n        var url = this.toUrl().replace(/'!(@.*?)::(.*?)'/ig, function (match, labelName, value) {\r\n            Logger.write(\"Rewriting aliased parameter from match \" + match + \" to label: \" + labelName + \" value: \" + value, 0 /* Verbose */);\r\n            aliasedParams.set(labelName, \"'\" + value + \"'\");\r\n            return labelName;\r\n        });\r\n        if (aliasedParams.size > 0) {\r\n            var char = url.indexOf(\"?\") > -1 ? \"&\" : \"?\";\r\n            url += \"\" + char + Array.from(aliasedParams).map(function (v) { return v[0] + \"=\" + v[1]; }).join(\"&\");\r\n        }\r\n        return url;\r\n    };\r\n    /**\r\n     * Choose which fields to return\r\n     *\r\n     * @param selects One or more fields to return\r\n     */\r\n    _SharePointQueryable.prototype.select = function () {\r\n        var selects = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            selects[_i] = arguments[_i];\r\n        }\r\n        if (selects.length > 0) {\r\n            this.query.set(\"$select\", selects.join(\",\"));\r\n        }\r\n        return this;\r\n    };\r\n    _SharePointQueryable.prototype.get = function (options) {\r\n        return spGet(this, options);\r\n    };\r\n    /**\r\n     * Expands fields such as lookups to get additional data\r\n     *\r\n     * @param expands The Fields for which to expand the values\r\n     */\r\n    _SharePointQueryable.prototype.expand = function () {\r\n        var expands = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            expands[_i] = arguments[_i];\r\n        }\r\n        if (expands.length > 0) {\r\n            this.query.set(\"$expand\", expands.join(\",\"));\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Clones this SharePointQueryable into a new SharePointQueryable instance of T\r\n     * @param factory Constructor used to create the new instance\r\n     * @param additionalPath Any additional path to include in the clone\r\n     * @param includeBatch If true this instance's batch will be added to the cloned instance\r\n     */\r\n    _SharePointQueryable.prototype.clone = function (factory, additionalPath, includeBatch) {\r\n        if (includeBatch === void 0) { includeBatch = true; }\r\n        var clone = _super.prototype.cloneTo.call(this, factory(this, additionalPath), { includeBatch: includeBatch });\r\n        // handle sp specific clone actions\r\n        var t = \"@target\";\r\n        if (this.query.has(t)) {\r\n            clone.query.set(t, this.query.get(t));\r\n        }\r\n        return clone;\r\n    };\r\n    /**\r\n     * The default action for this object (unless overridden spGet)\r\n     *\r\n     * @param options optional request options\r\n     */\r\n    _SharePointQueryable.prototype.defaultAction = function (options) {\r\n        return spGet(this, options);\r\n    };\r\n    /**\r\n     * Gets a parent for this instance as specified\r\n     *\r\n     * @param factory The contructor for the class to create\r\n     */\r\n    _SharePointQueryable.prototype.getParent = function (factory, baseUrl, path, batch) {\r\n        if (baseUrl === void 0) { baseUrl = this.parentUrl; }\r\n        var parent = factory(baseUrl, path).configureFrom(this);\r\n        var t = \"@target\";\r\n        if (this.query.has(t)) {\r\n            parent.query.set(t, this.query.get(t));\r\n        }\r\n        if (batch !== undefined) {\r\n            parent = parent.inBatch(batch);\r\n        }\r\n        return parent;\r\n    };\r\n    return _SharePointQueryable;\r\n}(Queryable));\r\nexport { _SharePointQueryable };\r\nexport var SharePointQueryable = spInvokableFactory(_SharePointQueryable);\r\n/**\r\n * Represents a REST collection which can be filtered, paged, and selected\r\n *\r\n */\r\nvar _SharePointQueryableCollection = /** @class */ (function (_super) {\r\n    __extends(_SharePointQueryableCollection, _super);\r\n    function _SharePointQueryableCollection() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Filters the returned collection (https://msdn.microsoft.com/en-us/library/office/fp142385.aspx#bk_supported)\r\n     *\r\n     * @param filter The string representing the filter query\r\n     */\r\n    _SharePointQueryableCollection.prototype.filter = function (filter) {\r\n        this.query.set(\"$filter\", filter);\r\n        return this;\r\n    };\r\n    /**\r\n     * Orders based on the supplied fields\r\n     *\r\n     * @param orderby The name of the field on which to sort\r\n     * @param ascending If false DESC is appended, otherwise ASC (default)\r\n     */\r\n    _SharePointQueryableCollection.prototype.orderBy = function (orderBy, ascending) {\r\n        if (ascending === void 0) { ascending = true; }\r\n        var o = \"$orderby\";\r\n        var query = this.query.has(o) ? this.query.get(o).split(\",\") : [];\r\n        query.push(orderBy + \" \" + (ascending ? \"asc\" : \"desc\"));\r\n        this.query.set(o, query.join(\",\"));\r\n        return this;\r\n    };\r\n    /**\r\n     * Skips the specified number of items\r\n     *\r\n     * @param skip The number of items to skip\r\n     */\r\n    _SharePointQueryableCollection.prototype.skip = function (skip) {\r\n        this.query.set(\"$skip\", skip.toString());\r\n        return this;\r\n    };\r\n    /**\r\n     * Limits the query to only return the specified number of items\r\n     *\r\n     * @param top The query row limit\r\n     */\r\n    _SharePointQueryableCollection.prototype.top = function (top) {\r\n        this.query.set(\"$top\", top.toString());\r\n        return this;\r\n    };\r\n    return _SharePointQueryableCollection;\r\n}(_SharePointQueryable));\r\nexport { _SharePointQueryableCollection };\r\nexport var SharePointQueryableCollection = spInvokableFactory(_SharePointQueryableCollection);\r\n/**\r\n * Represents an instance that can be selected\r\n *\r\n */\r\nvar _SharePointQueryableInstance = /** @class */ (function (_super) {\r\n    __extends(_SharePointQueryableInstance, _super);\r\n    function _SharePointQueryableInstance() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Curries the update function into the common pieces\r\n     *\r\n     * @param type\r\n     * @param mapper\r\n     */\r\n    _SharePointQueryableInstance.prototype._update = function (type, mapper) {\r\n        var _this = this;\r\n        return function (props) { return spPost(tag.configure(_this, type + \".Update\"), {\r\n            body: jsS(assign(metadata(type), props)),\r\n            headers: {\r\n                \"X-HTTP-Method\": \"MERGE\",\r\n            },\r\n        }).then(function (d) { return mapper(d, props); }); };\r\n    };\r\n    return _SharePointQueryableInstance;\r\n}(_SharePointQueryable));\r\nexport { _SharePointQueryableInstance };\r\nexport var SharePointQueryableInstance = spInvokableFactory(_SharePointQueryableInstance);\r\n/**\r\n * Adds the a delete method to the tagged class taking no parameters and calling spPostDelete\r\n */\r\nexport function deleteable(t) {\r\n    return function () {\r\n        return spPostDelete(tag.configure(this, t + \".delete\"));\r\n    };\r\n}\r\nexport function deleteableWithETag(t) {\r\n    return function (eTag) {\r\n        if (eTag === void 0) { eTag = \"*\"; }\r\n        return spPostDeleteETag(tag.configure(this, t + \".delete\"), {}, eTag);\r\n    };\r\n}\r\n//# sourceMappingURL=sharepointqueryable.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { Batch } from \"@pnp/odata\";\r\nimport { getGUID, isUrlAbsolute, combine, mergeHeaders, hOP } from \"@pnp/common\";\r\nimport { Logger } from \"@pnp/logging\";\r\nimport { SPHttpClient } from \"./sphttpclient\";\r\nimport { SPRuntimeConfig } from \"./splibconfig\";\r\nimport { toAbsoluteUrl } from \"./utils/toabsoluteurl\";\r\n/**\r\n * Manages a batch of OData operations\r\n */\r\nvar SPBatch = /** @class */ (function (_super) {\r\n    __extends(SPBatch, _super);\r\n    function SPBatch(baseUrl) {\r\n        var _this = _super.call(this) || this;\r\n        _this.baseUrl = baseUrl;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Parses the response from a batch request into an array of Response instances\r\n     *\r\n     * @param body Text body of the response from the batch request\r\n     */\r\n    SPBatch.ParseResponse = function (body) {\r\n        var responses = [];\r\n        var header = \"--batchresponse_\";\r\n        // Ex. \"HTTP/1.1 500 Internal Server Error\"\r\n        var statusRegExp = new RegExp(\"^HTTP/[0-9.]+ +([0-9]+) +(.*)\", \"i\");\r\n        var lines = body.split(\"\\n\");\r\n        var state = \"batch\";\r\n        var status;\r\n        var statusText;\r\n        for (var i = 0; i < lines.length; ++i) {\r\n            var line = lines[i];\r\n            switch (state) {\r\n                case \"batch\":\r\n                    if (line.substr(0, header.length) === header) {\r\n                        state = \"batchHeaders\";\r\n                    }\r\n                    else {\r\n                        if (line.trim() !== \"\") {\r\n                            throw Error(\"Invalid response, line \" + i);\r\n                        }\r\n                    }\r\n                    break;\r\n                case \"batchHeaders\":\r\n                    if (line.trim() === \"\") {\r\n                        state = \"status\";\r\n                    }\r\n                    break;\r\n                case \"status\":\r\n                    var parts = statusRegExp.exec(line);\r\n                    if (parts.length !== 3) {\r\n                        throw Error(\"Invalid status, line \" + i);\r\n                    }\r\n                    status = parseInt(parts[1], 10);\r\n                    statusText = parts[2];\r\n                    state = \"statusHeaders\";\r\n                    break;\r\n                case \"statusHeaders\":\r\n                    if (line.trim() === \"\") {\r\n                        state = \"body\";\r\n                    }\r\n                    break;\r\n                case \"body\":\r\n                    responses.push((status === 204) ? new Response() : new Response(line, { status: status, statusText: statusText }));\r\n                    state = \"batch\";\r\n                    break;\r\n            }\r\n        }\r\n        if (state !== \"status\") {\r\n            throw Error(\"Unexpected end of input\");\r\n        }\r\n        return responses;\r\n    };\r\n    SPBatch.prototype.executeImpl = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var client, absoluteRequestUrl, batchBody, currentChangeSetId, i, reqInfo, headers, url, method, castHeaders, batchOptions, fetchResponse, text, responses;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        Logger.write(\"[\" + this.batchId + \"] (\" + (new Date()).getTime() + \") Executing batch with \" + this.requests.length + \" requests.\", 1 /* Info */);\r\n                        // if we don't have any requests, don't bother sending anything\r\n                        // this could be due to caching further upstream, or just an empty batch\r\n                        if (this.requests.length < 1) {\r\n                            Logger.write(\"Resolving empty batch.\", 1 /* Info */);\r\n                            return [2 /*return*/];\r\n                        }\r\n                        client = new SPHttpClient();\r\n                        return [4 /*yield*/, toAbsoluteUrl(this.baseUrl)];\r\n                    case 1:\r\n                        absoluteRequestUrl = _a.sent();\r\n                        batchBody = [];\r\n                        currentChangeSetId = \"\";\r\n                        for (i = 0; i < this.requests.length; i++) {\r\n                            reqInfo = this.requests[i];\r\n                            if (reqInfo.method === \"GET\") {\r\n                                if (currentChangeSetId.length > 0) {\r\n                                    // end an existing change set\r\n                                    batchBody.push(\"--changeset_\" + currentChangeSetId + \"--\\n\\n\");\r\n                                    currentChangeSetId = \"\";\r\n                                }\r\n                                batchBody.push(\"--batch_\" + this.batchId + \"\\n\");\r\n                            }\r\n                            else {\r\n                                if (currentChangeSetId.length < 1) {\r\n                                    // start new change set\r\n                                    currentChangeSetId = getGUID();\r\n                                    batchBody.push(\"--batch_\" + this.batchId + \"\\n\");\r\n                                    batchBody.push(\"Content-Type: multipart/mixed; boundary=\\\"changeset_\" + currentChangeSetId + \"\\\"\\n\\n\");\r\n                                }\r\n                                batchBody.push(\"--changeset_\" + currentChangeSetId + \"\\n\");\r\n                            }\r\n                            // common batch part prefix\r\n                            batchBody.push(\"Content-Type: application/http\\n\");\r\n                            batchBody.push(\"Content-Transfer-Encoding: binary\\n\\n\");\r\n                            headers = new Headers();\r\n                            url = isUrlAbsolute(reqInfo.url) ? reqInfo.url : combine(absoluteRequestUrl, reqInfo.url);\r\n                            Logger.write(\"[\" + this.batchId + \"] (\" + (new Date()).getTime() + \") Adding request \" + reqInfo.method + \" \" + url + \" to batch.\", 0 /* Verbose */);\r\n                            if (reqInfo.method !== \"GET\") {\r\n                                method = reqInfo.method;\r\n                                castHeaders = reqInfo.options.headers;\r\n                                if (hOP(reqInfo, \"options\") && hOP(reqInfo.options, \"headers\") && castHeaders[\"X-HTTP-Method\"] !== undefined) {\r\n                                    method = castHeaders[\"X-HTTP-Method\"];\r\n                                    delete castHeaders[\"X-HTTP-Method\"];\r\n                                }\r\n                                batchBody.push(method + \" \" + url + \" HTTP/1.1\\n\");\r\n                                headers.set(\"Content-Type\", \"application/json;odata=verbose;charset=utf-8\");\r\n                            }\r\n                            else {\r\n                                batchBody.push(reqInfo.method + \" \" + url + \" HTTP/1.1\\n\");\r\n                            }\r\n                            // merge global config headers\r\n                            mergeHeaders(headers, SPRuntimeConfig.headers);\r\n                            // merge per-request headers\r\n                            if (reqInfo.options) {\r\n                                mergeHeaders(headers, reqInfo.options.headers);\r\n                            }\r\n                            // lastly we apply any default headers we need that may not exist\r\n                            if (!headers.has(\"Accept\")) {\r\n                                headers.append(\"Accept\", \"application/json\");\r\n                            }\r\n                            if (!headers.has(\"Content-Type\")) {\r\n                                headers.append(\"Content-Type\", \"application/json;odata=verbose;charset=utf-8\");\r\n                            }\r\n                            if (!headers.has(\"X-ClientService-ClientTag\")) {\r\n                                headers.append(\"X-ClientService-ClientTag\", \"PnPCoreJS:@pnp-2.0.3:batch\");\r\n                            }\r\n                            // write headers into batch body\r\n                            headers.forEach(function (value, name) {\r\n                                batchBody.push(name + \": \" + value + \"\\n\");\r\n                            });\r\n                            batchBody.push(\"\\n\");\r\n                            if (reqInfo.options.body) {\r\n                                batchBody.push(reqInfo.options.body + \"\\n\\n\");\r\n                            }\r\n                        }\r\n                        if (currentChangeSetId.length > 0) {\r\n                            // Close the changeset\r\n                            batchBody.push(\"--changeset_\" + currentChangeSetId + \"--\\n\\n\");\r\n                            currentChangeSetId = \"\";\r\n                        }\r\n                        batchBody.push(\"--batch_\" + this.batchId + \"--\\n\");\r\n                        batchOptions = {\r\n                            \"body\": batchBody.join(\"\"),\r\n                            \"headers\": {\r\n                                \"Content-Type\": \"multipart/mixed; boundary=batch_\" + this.batchId,\r\n                            },\r\n                            \"method\": \"POST\",\r\n                        };\r\n                        Logger.write(\"[\" + this.batchId + \"] (\" + (new Date()).getTime() + \") Sending batch request.\", 1 /* Info */);\r\n                        return [4 /*yield*/, client.fetch(combine(absoluteRequestUrl, \"/_api/$batch\"), batchOptions)];\r\n                    case 2:\r\n                        fetchResponse = _a.sent();\r\n                        return [4 /*yield*/, fetchResponse.text()];\r\n                    case 3:\r\n                        text = _a.sent();\r\n                        responses = SPBatch.ParseResponse(text);\r\n                        if (responses.length !== this.requests.length) {\r\n                            throw Error(\"Could not properly parse responses to match requests in batch.\");\r\n                        }\r\n                        Logger.write(\"[\" + this.batchId + \"] (\" + (new Date()).getTime() + \") Resolving batched requests.\", 1 /* Info */);\r\n                        // this structure ensures that we resolve the batched requests in the order we expect\r\n                        // using async this is not guaranteed depending on the requests\r\n                        return [2 /*return*/, responses.reduce(function (p, response, index) { return p.then(function (_) { return __awaiter(_this, void 0, void 0, function () {\r\n                                var request, _a, _b, e_1;\r\n                                return __generator(this, function (_c) {\r\n                                    switch (_c.label) {\r\n                                        case 0:\r\n                                            request = this.requests[index];\r\n                                            Logger.write(\"[\" + request.id + \"] (\" + (new Date()).getTime() + \") Resolving request in batch \" + this.batchId + \".\", 1 /* Info */);\r\n                                            _c.label = 1;\r\n                                        case 1:\r\n                                            _c.trys.push([1, 3, , 4]);\r\n                                            _b = (_a = request).resolve;\r\n                                            return [4 /*yield*/, request.parser.parse(response)];\r\n                                        case 2:\r\n                                            _b.apply(_a, [_c.sent()]);\r\n                                            return [3 /*break*/, 4];\r\n                                        case 3:\r\n                                            e_1 = _c.sent();\r\n                                            request.reject(e_1);\r\n                                            return [3 /*break*/, 4];\r\n                                        case 4: return [2 /*return*/];\r\n                                    }\r\n                                });\r\n                            }); }); }, Promise.resolve(void (0)))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SPBatch;\r\n}(Batch));\r\nexport { SPBatch };\r\n//# sourceMappingURL=batch.js.map","/**\r\n * Class Decorators\r\n */\r\nimport { __extends } from \"tslib\";\r\n/**\r\n * Decorator used to specify the default path for SharePointQueryable objects\r\n *\r\n * @param path\r\n */\r\nexport function defaultPath(path) {\r\n    return function (target) {\r\n        return /** @class */ (function (_super) {\r\n            __extends(class_1, _super);\r\n            function class_1() {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                return _super.call(this, args[0], args.length > 1 && args[1] !== undefined ? args[1] : path) || this;\r\n            }\r\n            return class_1;\r\n        }(target));\r\n    };\r\n}\r\n// TODO::?\r\n// performance tracking method decorator\r\n// redirect to graph api\r\n//# sourceMappingURL=decorators.js.map","import { setup as _setup, } from \"./splibconfig\";\r\n/**\r\n * Root of the SharePoint REST module\r\n */\r\nvar SPRest = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of the SPRest class\r\n     *\r\n     * @param options Additional options\r\n     * @param baseUrl A string that should form the base part of the url\r\n     */\r\n    function SPRest(_options, _baseUrl) {\r\n        if (_options === void 0) { _options = {}; }\r\n        if (_baseUrl === void 0) { _baseUrl = \"\"; }\r\n        this._options = _options;\r\n        this._baseUrl = _baseUrl;\r\n    }\r\n    /**\r\n     * Configures instance with additional options and baseUrl.\r\n     * Provided configuration used by other objects in a chain\r\n     *\r\n     * @param options Additional options\r\n     * @param baseUrl A string that should form the base part of the url\r\n     */\r\n    SPRest.prototype.configure = function (options, baseUrl) {\r\n        if (baseUrl === void 0) { baseUrl = \"\"; }\r\n        return new SPRest(options, baseUrl);\r\n    };\r\n    /**\r\n     * Global SharePoint configuration options\r\n     *\r\n     * @param config The SharePoint configuration to apply\r\n     */\r\n    SPRest.prototype.setup = function (config) {\r\n        if (config.pageContext) {\r\n            _setup({\r\n                spfxContext: config,\r\n            });\r\n        }\r\n        else {\r\n            _setup(config);\r\n        }\r\n    };\r\n    return SPRest;\r\n}());\r\nexport { SPRest };\r\nexport var sp = new SPRest();\r\n//# sourceMappingURL=rest.js.map","// reference: https://msdn.microsoft.com/en-us/library/office/dn600183.aspx\r\n/**\r\n * Specifies the type of a principal.\r\n */\r\n/* tslint:disable:no-bitwise */\r\nexport var PrincipalType;\r\n(function (PrincipalType) {\r\n    /**\r\n     * Enumeration whose value specifies no principal type.\r\n     */\r\n    PrincipalType[PrincipalType[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Enumeration whose value specifies a user as the principal type.\r\n     */\r\n    PrincipalType[PrincipalType[\"User\"] = 1] = \"User\";\r\n    /**\r\n     * Enumeration whose value specifies a distribution list as the principal type.\r\n     */\r\n    PrincipalType[PrincipalType[\"DistributionList\"] = 2] = \"DistributionList\";\r\n    /**\r\n     * Enumeration whose value specifies a security group as the principal type.\r\n     */\r\n    PrincipalType[PrincipalType[\"SecurityGroup\"] = 4] = \"SecurityGroup\";\r\n    /**\r\n     * Enumeration whose value specifies a group as the principal type.\r\n     */\r\n    PrincipalType[PrincipalType[\"SharePointGroup\"] = 8] = \"SharePointGroup\";\r\n    /**\r\n     * Enumeration whose value specifies all principal types.\r\n     */\r\n    PrincipalType[PrincipalType[\"All\"] = 15] = \"All\";\r\n})(PrincipalType || (PrincipalType = {}));\r\n/* tslint:enable:no-bitwise */\r\n/**\r\n * Specifies the source of a principal.\r\n */\r\n/* tslint:disable:no-bitwise */\r\nexport var PrincipalSource;\r\n(function (PrincipalSource) {\r\n    /**\r\n     * Enumeration whose value specifies no principal source.\r\n     */\r\n    PrincipalSource[PrincipalSource[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Enumeration whose value specifies user information list as the principal source.\r\n     */\r\n    PrincipalSource[PrincipalSource[\"UserInfoList\"] = 1] = \"UserInfoList\";\r\n    /**\r\n     * Enumeration whose value specifies Active Directory as the principal source.\r\n     */\r\n    PrincipalSource[PrincipalSource[\"Windows\"] = 2] = \"Windows\";\r\n    /**\r\n     * Enumeration whose value specifies the current membership provider as the principal source.\r\n     */\r\n    PrincipalSource[PrincipalSource[\"MembershipProvider\"] = 4] = \"MembershipProvider\";\r\n    /**\r\n     * Enumeration whose value specifies the current role provider as the principal source.\r\n     */\r\n    PrincipalSource[PrincipalSource[\"RoleProvider\"] = 8] = \"RoleProvider\";\r\n    /**\r\n     * Enumeration whose value specifies all principal sources.\r\n     */\r\n    PrincipalSource[PrincipalSource[\"All\"] = 15] = \"All\";\r\n})(PrincipalSource || (PrincipalSource = {}));\r\nexport var PageType;\r\n(function (PageType) {\r\n    PageType[PageType[\"Invalid\"] = -1] = \"Invalid\";\r\n    PageType[PageType[\"DefaultView\"] = 0] = \"DefaultView\";\r\n    PageType[PageType[\"NormalView\"] = 1] = \"NormalView\";\r\n    PageType[PageType[\"DialogView\"] = 2] = \"DialogView\";\r\n    PageType[PageType[\"View\"] = 3] = \"View\";\r\n    PageType[PageType[\"DisplayForm\"] = 4] = \"DisplayForm\";\r\n    PageType[PageType[\"DisplayFormDialog\"] = 5] = \"DisplayFormDialog\";\r\n    PageType[PageType[\"EditForm\"] = 6] = \"EditForm\";\r\n    PageType[PageType[\"EditFormDialog\"] = 7] = \"EditFormDialog\";\r\n    PageType[PageType[\"NewForm\"] = 8] = \"NewForm\";\r\n    PageType[PageType[\"NewFormDialog\"] = 9] = \"NewFormDialog\";\r\n    PageType[PageType[\"SolutionForm\"] = 10] = \"SolutionForm\";\r\n    PageType[PageType[\"PAGE_MAXITEMS\"] = 11] = \"PAGE_MAXITEMS\";\r\n})(PageType || (PageType = {}));\r\n//# sourceMappingURL=types.js.map","import { __extends, __read, __spread } from \"tslib\";\r\nimport { assign, combine, hOP, isUrlAbsolute } from \"@pnp/common\";\r\nimport { Logger } from \"@pnp/logging\";\r\nimport { ODataParser } from \"@pnp/odata\";\r\nimport { extractWebUrl } from \"./utils/extractweburl\";\r\nexport function odataUrlFrom(candidate) {\r\n    var parts = [];\r\n    var s = [\"odata.type\", \"odata.editLink\", \"__metadata\", \"odata.metadata\", \"odata.id\"];\r\n    if (hOP(candidate, s[0]) && candidate[s[0]] === \"SP.Web\") {\r\n        // webs return an absolute url in the id\r\n        if (hOP(candidate, s[4])) {\r\n            parts.push(candidate[s[4]]);\r\n        }\r\n        else if (hOP(candidate, s[2])) {\r\n            // we are dealing with verbose, which has an absolute uri\r\n            parts.push(candidate.__metadata.uri);\r\n        }\r\n    }\r\n    else {\r\n        if (hOP(candidate, s[3]) && hOP(candidate, s[1])) {\r\n            // we are dealign with minimal metadata (default)\r\n            // some entities return an abosolute url in the editlink while for others it is relative\r\n            // without the _api. This code is meant to handle both situations\r\n            var editLink = isUrlAbsolute(candidate[s[1]]) ? candidate[s[1]].split(\"_api\")[1] : candidate[s[1]];\r\n            parts.push(extractWebUrl(candidate[s[3]]), \"_api\", editLink);\r\n        }\r\n        else if (hOP(candidate, s[1])) {\r\n            parts.push(\"_api\", candidate[s[1]]);\r\n        }\r\n        else if (hOP(candidate, s[2])) {\r\n            // we are dealing with verbose, which has an absolute uri\r\n            parts.push(candidate.__metadata.uri);\r\n        }\r\n    }\r\n    if (parts.length < 1) {\r\n        Logger.write(\"No uri information found in ODataEntity parsing, chaining will fail for this object.\", 2 /* Warning */);\r\n        return \"\";\r\n    }\r\n    return combine.apply(void 0, __spread(parts));\r\n}\r\nvar SPODataEntityParserImpl = /** @class */ (function (_super) {\r\n    __extends(SPODataEntityParserImpl, _super);\r\n    function SPODataEntityParserImpl(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.factory = factory;\r\n        _this.hydrate = function (d) {\r\n            var o = _this.factory(odataUrlFrom(d), null);\r\n            return assign(o, d);\r\n        };\r\n        return _this;\r\n    }\r\n    SPODataEntityParserImpl.prototype.parse = function (r) {\r\n        var _this = this;\r\n        return _super.prototype.parse.call(this, r).then(function (d) {\r\n            var o = _this.factory(odataUrlFrom(d), null);\r\n            return assign(o, d);\r\n        });\r\n    };\r\n    return SPODataEntityParserImpl;\r\n}(ODataParser));\r\nvar SPODataEntityArrayParserImpl = /** @class */ (function (_super) {\r\n    __extends(SPODataEntityArrayParserImpl, _super);\r\n    function SPODataEntityArrayParserImpl(factory) {\r\n        var _this = _super.call(this) || this;\r\n        _this.factory = factory;\r\n        _this.hydrate = function (d) {\r\n            return d.map(function (v) {\r\n                var o = _this.factory(odataUrlFrom(v), null);\r\n                return assign(o, v);\r\n            });\r\n        };\r\n        return _this;\r\n    }\r\n    SPODataEntityArrayParserImpl.prototype.parse = function (r) {\r\n        var _this = this;\r\n        return _super.prototype.parse.call(this, r).then(function (d) {\r\n            return d.map(function (v) {\r\n                var o = _this.factory(odataUrlFrom(v), null);\r\n                return assign(o, v);\r\n            });\r\n        });\r\n    };\r\n    return SPODataEntityArrayParserImpl;\r\n}(ODataParser));\r\nexport function spODataEntity(factory) {\r\n    return new SPODataEntityParserImpl(factory);\r\n}\r\nexport function spODataEntityArray(factory) {\r\n    return new SPODataEntityArrayParserImpl(factory);\r\n}\r\n//# sourceMappingURL=odata.js.map","import { stringIsNullOrEmpty } from \"@pnp/common\";\r\nimport { Logger } from \"@pnp/logging\";\r\nexport function escapeQueryStrValue(value) {\r\n    if (stringIsNullOrEmpty(value)) {\r\n        return \"\";\r\n    }\r\n    // replace all instance of ' with ''\r\n    if (/!(@.*?)::(.*?)/ig.test(value)) {\r\n        // to ensure our param aliasing still works we need to treat these special or we'll hear about it\r\n        // so we encode JUST the part that will end up in the url\r\n        return value.replace(/!(@.*?)::(.*)$/ig, function (match, labelName, v) {\r\n            Logger.write(\"Rewriting aliased parameter from match \" + match + \" to label: \" + labelName + \" value: \" + v, 0 /* Verbose */);\r\n            return \"!\" + labelName + \"::\" + encodeURIComponent(v.replace(/\\'/ig, \"''\"));\r\n        });\r\n    }\r\n    else {\r\n        return encodeURIComponent(value.replace(/\\'/ig, \"''\"));\r\n    }\r\n}\r\n//# sourceMappingURL=escapeQueryStrValue.js.map","import { __awaiter, __decorate, __extends, __generator } from \"tslib\";\r\nimport { SharePointQueryable, _SharePointQueryableInstance, spInvokableFactory } from \"../sharepointqueryable\";\r\nimport { defaultPath } from \"../decorators\";\r\nimport { Web } from \"../webs/types\";\r\nimport { hOP, jsS, assign } from \"@pnp/common\";\r\nimport { SPHttpClient } from \"../sphttpclient\";\r\nimport { body, headers } from \"@pnp/odata\";\r\nimport { odataUrlFrom } from \"../odata\";\r\nimport { spPost } from \"../operations\";\r\nimport { SPBatch } from \"../batch\";\r\nimport { escapeQueryStrValue } from \"../utils/escapeQueryStrValue\";\r\nimport { tag } from \"../telemetry\";\r\nimport { metadata } from \"../utils/metadata\";\r\nimport { extractWebUrl } from \"../utils/extractweburl\";\r\nvar _Site = /** @class */ (function (_super) {\r\n    __extends(_Site, _super);\r\n    function _Site() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(_Site.prototype, \"rootWeb\", {\r\n        /**\r\n        * Gets the root web of the site collection\r\n        *\r\n        */\r\n        get: function () {\r\n            return tag.configure(Web(this, \"rootweb\"), \"si.rootWeb\");\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Gets a Web instance representing the root web of the site collection\r\n     * correctly setup for chaining within the library\r\n     */\r\n    _Site.prototype.getRootWeb = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var web;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.rootWeb.select(\"Url\")()];\r\n                    case 1:\r\n                        web = _a.sent();\r\n                        return [2 /*return*/, tag.configure(Web(web.Url), \"si.getRootWeb\")];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n    * Gets the context information for this site collection\r\n    */\r\n    _Site.prototype.getContextInfo = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var q, data, info;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        q = tag.configure(Site(this.parentUrl, \"_api/contextinfo\"), \"si.getContextInfo\");\r\n                        return [4 /*yield*/, spPost(q)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        if (hOP(data, \"GetContextWebInformation\")) {\r\n                            info = data.GetContextWebInformation;\r\n                            info.SupportedSchemaVersions = info.SupportedSchemaVersions.results;\r\n                            return [2 /*return*/, info];\r\n                        }\r\n                        else {\r\n                            return [2 /*return*/, data];\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    _Site.prototype.createBatch = function () {\r\n        return new SPBatch(this.parentUrl);\r\n    };\r\n    /**\r\n    * Deletes the current site\r\n    *\r\n    */\r\n    _Site.prototype.delete = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var site, q;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.clone(Site, \"\").select(\"Id\")()];\r\n                    case 1:\r\n                        site = _a.sent();\r\n                        q = tag.configure(Site(this.parentUrl, \"_api/SPSiteManager/Delete\"), \"si.delete\");\r\n                        return [4 /*yield*/, spPost(q, body({ siteId: site.Id }))];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Gets the document libraries on a site. Static method. (SharePoint Online only)\r\n     *\r\n     * @param absoluteWebUrl The absolute url of the web whose document libraries should be returned\r\n     */\r\n    _Site.prototype.getDocumentLibraries = function (absoluteWebUrl) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var q, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        q = tag.configure(SharePointQueryable(\"\", \"_api/sp.web.getdocumentlibraries(@v)\"), \"si.getDocumentLibraries\");\r\n                        q.query.set(\"@v\", \"'\" + escapeQueryStrValue(absoluteWebUrl) + \"'\");\r\n                        return [4 /*yield*/, q()];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, hOP(data, \"GetDocumentLibraries\") ? data.GetDocumentLibraries : data];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Gets the site url from a page url\r\n     *\r\n     * @param absolutePageUrl The absolute url of the page\r\n     */\r\n    _Site.prototype.getWebUrlFromPageUrl = function (absolutePageUrl) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var q, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        q = tag.configure(SharePointQueryable(\"\", \"_api/sp.web.getweburlfrompageurl(@v)\"), \"si.getWebUrlFromPageUrl\");\r\n                        q.query.set(\"@v\", \"'\" + escapeQueryStrValue(absolutePageUrl) + \"'\");\r\n                        return [4 /*yield*/, q()];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, hOP(data, \"GetWebUrlFromPageUrl\") ? data.GetWebUrlFromPageUrl : data];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Returns the collection of changes from the change log that have occurred within the list, based on the specified query\r\n     *\r\n     * @param query The change query\r\n     */\r\n    _Site.prototype.getChanges = function (query) {\r\n        var postBody = body({ \"query\": assign(metadata(\"SP.ChangeQuery\"), query) });\r\n        return spPost(this.clone(Web, \"getchanges\"), postBody);\r\n    };\r\n    /**\r\n    * Opens a web by id (using POST)\r\n    *\r\n    * @param webId The GUID id of the web to open\r\n    */\r\n    _Site.prototype.openWebById = function (webId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, spPost(this.clone(Site, \"openWebById('\" + webId + \"')\"))];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                data: data,\r\n                                web: Web(extractWebUrl(odataUrlFrom(data))),\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Creates a Modern communication site.\r\n     *\r\n     * @param title The title of the site to create\r\n     * @param lcid The language to use for the site. If not specified will default to 1033 (English).\r\n     * @param shareByEmailEnabled If set to true, it will enable sharing files via Email. By default it is set to false\r\n     * @param url The fully qualified URL (e.g. https://yourtenant.sharepoint.com/sites/mysitecollection) of the site.\r\n     * @param description The description of the communication site.\r\n     * @param classification The Site classification to use. For instance 'Contoso Classified'. See https://www.youtube.com/watch?v=E-8Z2ggHcS0 for more information\r\n     * @param siteDesignId The Guid of the site design to be used.\r\n     *                     You can use the below default OOTB GUIDs:\r\n     *                     Topic: 00000000-0000-0000-0000-000000000000\r\n     *                     Showcase: 6142d2a0-63a5-4ba0-aede-d9fefca2c767\r\n     *                     Blank: f6cc5403-0d63-442e-96c0-285923709ffc\r\n     */\r\n    _Site.prototype.createCommunicationSite = function (title, lcid, shareByEmailEnabled, url, description, classification, siteDesignId, hubSiteId, owner) {\r\n        if (lcid === void 0) { lcid = 1033; }\r\n        if (shareByEmailEnabled === void 0) { shareByEmailEnabled = false; }\r\n        if (description === void 0) { description = \"\"; }\r\n        if (classification === void 0) { classification = \"\"; }\r\n        if (siteDesignId === void 0) { siteDesignId = \"00000000-0000-0000-0000-000000000000\"; }\r\n        if (hubSiteId === void 0) { hubSiteId = \"00000000-0000-0000-0000-000000000000\"; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var props, postBody, d, client, methodUrl, r;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        props = {\r\n                            Classification: classification,\r\n                            Description: description,\r\n                            HubSiteId: hubSiteId,\r\n                            Lcid: lcid,\r\n                            Owner: owner,\r\n                            ShareByEmailEnabled: shareByEmailEnabled,\r\n                            SiteDesignId: siteDesignId,\r\n                            Title: title,\r\n                            Url: url,\r\n                            WebTemplate: \"SITEPAGEPUBLISHING#0\",\r\n                            WebTemplateExtensionId: \"00000000-0000-0000-0000-000000000000\",\r\n                        };\r\n                        postBody = body({\r\n                            \"request\": assign(metadata(\"Microsoft.SharePoint.Portal.SPSiteCreationRequest\"), props),\r\n                        }, headers({\r\n                            \"Accept\": \"application/json;odata=verbose\",\r\n                            \"Content-Type\": \"application/json;odata=verbose;charset=utf-8\",\r\n                        }));\r\n                        return [4 /*yield*/, this.getRootWeb()];\r\n                    case 1:\r\n                        d = _a.sent();\r\n                        client = new SPHttpClient();\r\n                        methodUrl = d.parentUrl + \"/_api/SPSiteManager/Create\";\r\n                        return [4 /*yield*/, client.post(methodUrl, postBody)];\r\n                    case 2:\r\n                        r = _a.sent();\r\n                        return [4 /*yield*/, r.json()];\r\n                    case 3: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n    * Creates a Modern team site backed by Office 365 group. For use in SP Online only. This will not work with App-only tokens\r\n    *\r\n    * @param displayName The title or display name of the Modern team site to be created\r\n    * @param alias Alias of the underlying Office 365 Group\r\n    * @param isPublic Defines whether the Office 365 Group will be public (default), or private.\r\n    * @param lcid The language to use for the site. If not specified will default to English (1033).\r\n    * @param description The description of the site to be created.\r\n    * @param classification The Site classification to use. For instance 'Contoso Classified'. See https://www.youtube.com/watch?v=E-8Z2ggHcS0 for more information\r\n    * @param owners The Owners of the site to be created\r\n    */\r\n    _Site.prototype.createModernTeamSite = function (displayName, alias, isPublic, lcid, description, classification, owners, hubSiteId, siteDesignId) {\r\n        if (isPublic === void 0) { isPublic = true; }\r\n        if (lcid === void 0) { lcid = 1033; }\r\n        if (description === void 0) { description = \"\"; }\r\n        if (classification === void 0) { classification = \"\"; }\r\n        if (hubSiteId === void 0) { hubSiteId = \"00000000-0000-0000-0000-000000000000\"; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var postBody, d, client, methodUrl, r;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        postBody = {\r\n                            alias: alias,\r\n                            displayName: displayName,\r\n                            isPublic: isPublic,\r\n                            optionalParams: {\r\n                                Classification: classification,\r\n                                CreationOptions: {\r\n                                    \"results\": [\"SPSiteLanguage:\" + lcid, \"HubSiteId:\" + hubSiteId],\r\n                                },\r\n                                Description: description,\r\n                                Owners: {\r\n                                    \"results\": owners ? owners : [],\r\n                                },\r\n                            },\r\n                        };\r\n                        if (siteDesignId) {\r\n                            postBody.optionalParams.CreationOptions.results.push(\"implicit_formula_292aa8a00786498a87a5ca52d9f4214a_\" + siteDesignId);\r\n                        }\r\n                        return [4 /*yield*/, this.getRootWeb()];\r\n                    case 1:\r\n                        d = _a.sent();\r\n                        client = new SPHttpClient();\r\n                        methodUrl = d.parentUrl + \"/_api/GroupSiteManager/CreateGroupEx\";\r\n                        return [4 /*yield*/, client.post(methodUrl, {\r\n                                body: jsS(postBody),\r\n                                headers: {\r\n                                    \"Accept\": \"application/json;odata=verbose\",\r\n                                    \"Content-Type\": \"application/json;odata=verbose;charset=utf-8\",\r\n                                },\r\n                            })];\r\n                    case 2:\r\n                        r = _a.sent();\r\n                        return [4 /*yield*/, r.json()];\r\n                    case 3: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    __decorate([\r\n        tag(\"si.getChanges\")\r\n    ], _Site.prototype, \"getChanges\", null);\r\n    __decorate([\r\n        tag(\"si.openWebById\")\r\n    ], _Site.prototype, \"openWebById\", null);\r\n    _Site = __decorate([\r\n        defaultPath(\"_api/site\")\r\n    ], _Site);\r\n    return _Site;\r\n}(_SharePointQueryableInstance));\r\nexport { _Site };\r\nexport var Site = spInvokableFactory(_Site);\r\n//# sourceMappingURL=types.js.map","import { SPRest } from \"../rest\";\r\nimport { Site } from \"./types\";\r\nexport { Site, } from \"./types\";\r\nReflect.defineProperty(SPRest.prototype, \"site\", {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get: function () {\r\n        return Site(this._baseUrl).configure(this._options);\r\n    },\r\n});\r\n//# sourceMappingURL=index.js.map","import { __awaiter, __decorate, __extends, __generator } from \"tslib\";\r\nimport { assign } from \"@pnp/common\";\r\nimport { body, headers } from \"@pnp/odata\";\r\nimport { _SharePointQueryableInstance, SharePointQueryableCollection, _SharePointQueryableCollection, spInvokableFactory, SharePointQueryableInstance, deleteable, } from \"../sharepointqueryable\";\r\nimport { defaultPath } from \"../decorators\";\r\nimport { odataUrlFrom } from \"../odata\";\r\nimport { SPBatch } from \"../batch\";\r\nimport { metadata } from \"../utils/metadata\";\r\nimport { Site } from \"../sites\";\r\nimport { spPost, spGet } from \"../operations\";\r\nimport { escapeQueryStrValue } from \"../utils/escapeQueryStrValue\";\r\nimport { tag } from \"../telemetry\";\r\nvar _Webs = /** @class */ (function (_super) {\r\n    __extends(_Webs, _super);\r\n    function _Webs() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Adds a new web to the collection\r\n     *\r\n     * @param title The new web's title\r\n     * @param url The new web's relative url\r\n     * @param description The new web's description\r\n     * @param template The new web's template internal name (default = STS)\r\n     * @param language The locale id that specifies the new web's language (default = 1033 [English, US])\r\n     * @param inheritPermissions When true, permissions will be inherited from the new web's parent (default = true)\r\n     */\r\n    _Webs.prototype.add = function (title, url, description, template, language, inheritPermissions) {\r\n        if (description === void 0) { description = \"\"; }\r\n        if (template === void 0) { template = \"STS\"; }\r\n        if (language === void 0) { language = 1033; }\r\n        if (inheritPermissions === void 0) { inheritPermissions = true; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var postBody, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        postBody = body({\r\n                            \"parameters\": assign(metadata(\"SP.WebCreationInformation\"), {\r\n                                Description: description,\r\n                                Language: language,\r\n                                Title: title,\r\n                                Url: url,\r\n                                UseSamePermissionsAsParentSite: inheritPermissions,\r\n                                WebTemplate: template,\r\n                            }),\r\n                        });\r\n                        return [4 /*yield*/, spPost(this.clone(Webs, \"add\"), postBody)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                data: data,\r\n                                web: Web(odataUrlFrom(data).replace(/_api\\/web\\/?/i, \"\")),\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    __decorate([\r\n        tag(\"ws.add\")\r\n    ], _Webs.prototype, \"add\", null);\r\n    _Webs = __decorate([\r\n        defaultPath(\"webs\")\r\n    ], _Webs);\r\n    return _Webs;\r\n}(_SharePointQueryableCollection));\r\nexport { _Webs };\r\nexport var Webs = spInvokableFactory(_Webs);\r\n/**\r\n * Describes a web\r\n *\r\n */\r\nvar _Web = /** @class */ (function (_super) {\r\n    __extends(_Web, _super);\r\n    function _Web() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.delete = deleteable(\"w\");\r\n        return _this;\r\n    }\r\n    Object.defineProperty(_Web.prototype, \"webs\", {\r\n        /**\r\n         * Gets this web's subwebs\r\n         *\r\n         */\r\n        get: function () {\r\n            return Webs(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Gets this web's parent web and data\r\n     *\r\n     */\r\n    _Web.prototype.getParentWeb = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ParentWeb;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, spGet(this.select(\"ParentWeb/Id\").expand(\"ParentWeb\"))];\r\n                    case 1:\r\n                        ParentWeb = (_a.sent()).ParentWeb;\r\n                        return [2 /*return*/, ParentWeb ? Site(this.parentUrl).openWebById(ParentWeb.Id) : null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n    * Returns a collection of objects that contain metadata about subsites of the current site in which the current user is a member.\r\n    *\r\n    * @param nWebTemplateFilter Specifies the site definition (default = -1)\r\n    * @param nConfigurationFilter A 16-bit integer that specifies the identifier of a configuration (default = -1)\r\n    */\r\n    _Web.prototype.getSubwebsFilteredForCurrentUser = function (nWebTemplateFilter, nConfigurationFilter) {\r\n        if (nWebTemplateFilter === void 0) { nWebTemplateFilter = -1; }\r\n        if (nConfigurationFilter === void 0) { nConfigurationFilter = -1; }\r\n        var o = this.clone(Webs, \"getSubwebsFilteredForCurrentUser(nWebTemplateFilter=\" + nWebTemplateFilter + \",nConfigurationFilter=\" + nConfigurationFilter + \")\");\r\n        return tag.configure(o, \"w.getSubwebsFilteredForCurrentUser\");\r\n    };\r\n    Object.defineProperty(_Web.prototype, \"allProperties\", {\r\n        /**\r\n         * Allows access to the web's all properties collection\r\n         */\r\n        get: function () {\r\n            return tag.configure(this.clone(SharePointQueryableInstance, \"allproperties\"), \"w.allprops\");\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(_Web.prototype, \"webinfos\", {\r\n        /**\r\n         * Gets a collection of WebInfos for this web's subwebs\r\n         *\r\n         */\r\n        get: function () {\r\n            return tag.configure(SharePointQueryableCollection(this, \"webinfos\"), \"w.webinfos\");\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Creates a new batch for requests within the context of this web\r\n     *\r\n     */\r\n    _Web.prototype.createBatch = function () {\r\n        return new SPBatch(this.parentUrl);\r\n    };\r\n    /**\r\n     * Updates this web instance with the supplied properties\r\n     *\r\n     * @param properties A plain object hash of values to update for the web\r\n     */\r\n    _Web.prototype.update = function (properties) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var postBody, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        postBody = body(assign(metadata(\"SP.Web\"), properties), headers({ \"X-HTTP-Method\": \"MERGE\" }));\r\n                        return [4 /*yield*/, spPost(this, postBody)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, { data: data, web: this }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Applies the theme specified by the contents of each of the files specified in the arguments to the site\r\n     *\r\n     * @param colorPaletteUrl The server-relative URL of the color palette file\r\n     * @param fontSchemeUrl The server-relative URL of the font scheme\r\n     * @param backgroundImageUrl The server-relative URL of the background image\r\n     * @param shareGenerated When true, the generated theme files are stored in the root site. When false, they are stored in this web\r\n     */\r\n    _Web.prototype.applyTheme = function (colorPaletteUrl, fontSchemeUrl, backgroundImageUrl, shareGenerated) {\r\n        var postBody = body({\r\n            backgroundImageUrl: backgroundImageUrl,\r\n            colorPaletteUrl: colorPaletteUrl,\r\n            fontSchemeUrl: fontSchemeUrl,\r\n            shareGenerated: shareGenerated,\r\n        });\r\n        return spPost(this.clone(Web, \"applytheme\"), postBody);\r\n    };\r\n    /**\r\n     * Applies the specified site definition or site template to the Web site that has no template applied to it\r\n     *\r\n     * @param template Name of the site definition or the name of the site template\r\n     */\r\n    _Web.prototype.applyWebTemplate = function (template) {\r\n        var q = this.clone(Web, \"applywebtemplate\");\r\n        q.concat(\"(webTemplate='\" + escapeQueryStrValue(template) + \"')\");\r\n        return spPost(q);\r\n    };\r\n    /**\r\n     * Returns a collection of site templates available for the site\r\n     *\r\n     * @param language The locale id of the site templates to retrieve (default = 1033 [English, US])\r\n     * @param includeCrossLanguage When true, includes language-neutral site templates; otherwise false (default = true)\r\n     */\r\n    _Web.prototype.availableWebTemplates = function (language, includeCrossLanugage) {\r\n        if (language === void 0) { language = 1033; }\r\n        if (includeCrossLanugage === void 0) { includeCrossLanugage = true; }\r\n        var path = \"getavailablewebtemplates(lcid=\" + language + \", doincludecrosslanguage=\" + includeCrossLanugage + \")\";\r\n        return tag.configure(SharePointQueryableCollection(this, path), \"w.availableWebTemplates\");\r\n    };\r\n    /**\r\n     * Returns the collection of changes from the change log that have occurred within the list, based on the specified query\r\n     *\r\n     * @param query The change query\r\n     */\r\n    _Web.prototype.getChanges = function (query) {\r\n        var postBody = body({ \"query\": assign(metadata(\"SP.ChangeQuery\"), query) });\r\n        return spPost(this.clone(Web, \"getchanges\"), postBody);\r\n    };\r\n    /**\r\n     * Returns the name of the image file for the icon that is used to represent the specified file\r\n     *\r\n     * @param filename The file name. If this parameter is empty, the server returns an empty string\r\n     * @param size The size of the icon: 16x16 pixels = 0, 32x32 pixels = 1 (default = 0)\r\n     * @param progId The ProgID of the application that was used to create the file, in the form OLEServerName.ObjectName\r\n     */\r\n    _Web.prototype.mapToIcon = function (filename, size, progId) {\r\n        if (size === void 0) { size = 0; }\r\n        if (progId === void 0) { progId = \"\"; }\r\n        return spGet(this.clone(Web, \"maptoicon(filename='\" + escapeQueryStrValue(filename) + \"', progid='\" + escapeQueryStrValue(progId) + \"', size=\" + size + \")\"));\r\n    };\r\n    /**\r\n     * Returns the tenant property corresponding to the specified key in the app catalog site\r\n     *\r\n     * @param key Id of storage entity to be set\r\n     */\r\n    _Web.prototype.getStorageEntity = function (key) {\r\n        return spGet(this.clone(Web, \"getStorageEntity('\" + escapeQueryStrValue(key) + \"')\"));\r\n    };\r\n    /**\r\n     * This will set the storage entity identified by the given key (MUST be called in the context of the app catalog)\r\n     *\r\n     * @param key Id of storage entity to be set\r\n     * @param value Value of storage entity to be set\r\n     * @param description Description of storage entity to be set\r\n     * @param comments Comments of storage entity to be set\r\n     */\r\n    _Web.prototype.setStorageEntity = function (key, value, description, comments) {\r\n        if (description === void 0) { description = \"\"; }\r\n        if (comments === void 0) { comments = \"\"; }\r\n        return spPost(this.clone(Web, \"setStorageEntity\"), body({\r\n            comments: comments,\r\n            description: description,\r\n            key: key,\r\n            value: value,\r\n        }));\r\n    };\r\n    /**\r\n     * This will remove the storage entity identified by the given key\r\n     *\r\n     * @param key Id of storage entity to be removed\r\n     */\r\n    _Web.prototype.removeStorageEntity = function (key) {\r\n        return spPost(this.clone(Web, \"removeStorageEntity('\" + escapeQueryStrValue(key) + \"')\"));\r\n    };\r\n    __decorate([\r\n        tag(\"w.getParentWeb\")\r\n    ], _Web.prototype, \"getParentWeb\", null);\r\n    __decorate([\r\n        tag(\"w.update\")\r\n    ], _Web.prototype, \"update\", null);\r\n    __decorate([\r\n        tag(\"w.applyTheme\")\r\n    ], _Web.prototype, \"applyTheme\", null);\r\n    __decorate([\r\n        tag(\"w.applyWebTemplate\")\r\n    ], _Web.prototype, \"applyWebTemplate\", null);\r\n    __decorate([\r\n        tag(\"w.getChanges\")\r\n    ], _Web.prototype, \"getChanges\", null);\r\n    __decorate([\r\n        tag(\"w.mapToIcon\")\r\n    ], _Web.prototype, \"mapToIcon\", null);\r\n    __decorate([\r\n        tag(\"w.getStorageEntity\")\r\n    ], _Web.prototype, \"getStorageEntity\", null);\r\n    __decorate([\r\n        tag(\"w.setStorageEntity\")\r\n    ], _Web.prototype, \"setStorageEntity\", null);\r\n    __decorate([\r\n        tag(\"w.removeStorageEntity\")\r\n    ], _Web.prototype, \"removeStorageEntity\", null);\r\n    _Web = __decorate([\r\n        defaultPath(\"_api/web\")\r\n    ], _Web);\r\n    return _Web;\r\n}(_SharePointQueryableInstance));\r\nexport { _Web };\r\nexport var Web = spInvokableFactory(_Web);\r\n//# sourceMappingURL=types.js.map","export function toResourcePath(url) {\r\n    return {\r\n        DecodedUrl: url,\r\n        __metadata: { type: \"SP.ResourcePath\" },\r\n    };\r\n}\r\n//# sourceMappingURL=toResourcePath.js.map","import { Web } from \"./types\";\r\nimport { SPRest } from \"../rest\";\r\nexport { Web, Webs, } from \"./types\";\r\nReflect.defineProperty(SPRest.prototype, \"web\", {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get: function () {\r\n        return Web(this._baseUrl).configure(this._options);\r\n    },\r\n});\r\nSPRest.prototype.createBatch = function () {\r\n    return this.web.createBatch();\r\n};\r\n//# sourceMappingURL=index.js.map","import { __awaiter, __decorate, __extends, __generator } from \"tslib\";\r\nimport { assign, hOP, isArray, objectDefinedNotNull } from \"@pnp/common\";\r\nimport { body, headers } from \"@pnp/odata\";\r\nimport { SharePointQueryable, SharePointQueryableCollection, _SharePointQueryableInstance, _SharePointQueryableCollection, spInvokableFactory, deleteableWithETag, } from \"../sharepointqueryable\";\r\nimport { odataUrlFrom } from \"../odata\";\r\nimport { metadata } from \"../utils/metadata\";\r\nimport { defaultPath } from \"../decorators\";\r\nimport { spPost } from \"../operations\";\r\nimport { escapeQueryStrValue } from \"../utils/escapeQueryStrValue\";\r\nimport { tag } from \"../telemetry\";\r\nimport { toResourcePath } from \"../utils/toResourcePath\";\r\nvar _Lists = /** @class */ (function (_super) {\r\n    __extends(_Lists, _super);\r\n    function _Lists() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Gets a list from the collection by guid id\r\n     *\r\n     * @param id The Id of the list (GUID)\r\n     */\r\n    _Lists.prototype.getById = function (id) {\r\n        return tag.configure(List(this).concat(\"('\" + id + \"')\"), \"ls.getById\");\r\n    };\r\n    /**\r\n     * Gets a list from the collection by title\r\n     *\r\n     * @param title The title of the list\r\n     */\r\n    _Lists.prototype.getByTitle = function (title) {\r\n        return tag.configure(List(this, \"getByTitle('\" + escapeQueryStrValue(title) + \"')\"), \"ls.getByTitle\");\r\n    };\r\n    /**\r\n     * Adds a new list to the collection\r\n     *\r\n     * @param title The new list's title\r\n     * @param description The new list's description\r\n     * @param template The list template value\r\n     * @param enableContentTypes If true content types will be allowed and enabled, otherwise they will be disallowed and not enabled\r\n     * @param additionalSettings Will be passed as part of the list creation body\r\n     */\r\n    _Lists.prototype.add = function (title, desc, template, enableContentTypes, additionalSettings) {\r\n        if (desc === void 0) { desc = \"\"; }\r\n        if (template === void 0) { template = 100; }\r\n        if (enableContentTypes === void 0) { enableContentTypes = false; }\r\n        if (additionalSettings === void 0) { additionalSettings = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var addSettings, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        addSettings = Object.assign({\r\n                            \"AllowContentTypes\": enableContentTypes,\r\n                            \"BaseTemplate\": template,\r\n                            \"ContentTypesEnabled\": enableContentTypes,\r\n                            \"Description\": desc,\r\n                            \"Title\": title,\r\n                        }, metadata(\"SP.List\"), additionalSettings);\r\n                        return [4 /*yield*/, spPost(this, body(addSettings))];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, { data: data, list: this.getByTitle(addSettings.Title) }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Ensures that the specified list exists in the collection (note: this method not supported for batching)\r\n     *\r\n     * @param title The new list's title\r\n     * @param desc The new list's description\r\n     * @param template The list template value\r\n     * @param enableContentTypes If true content types will be allowed and enabled, otherwise they will be disallowed and not enabled\r\n     * @param additionalSettings Will be passed as part of the list creation body or used to update an existing list\r\n     */\r\n    _Lists.prototype.ensure = function (title, desc, template, enableContentTypes, additionalSettings) {\r\n        if (desc === void 0) { desc = \"\"; }\r\n        if (template === void 0) { template = 100; }\r\n        if (enableContentTypes === void 0) { enableContentTypes = false; }\r\n        if (additionalSettings === void 0) { additionalSettings = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var addOrUpdateSettings, list, data, e_1, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.hasBatch) {\r\n                            throw Error(\"The ensure list method is not supported for use in a batch.\");\r\n                        }\r\n                        addOrUpdateSettings = assign(additionalSettings, { Title: title, Description: desc, ContentTypesEnabled: enableContentTypes }, true);\r\n                        list = this.getByTitle(addOrUpdateSettings.Title);\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 4, , 6]);\r\n                        // this will throw if the list doesn't exist\r\n                        return [4 /*yield*/, list.select(\"Title\")()];\r\n                    case 2:\r\n                        // this will throw if the list doesn't exist\r\n                        _a.sent();\r\n                        return [4 /*yield*/, list.update(addOrUpdateSettings).then(function (r) { return r.data; })];\r\n                    case 3:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, { created: false, data: data, list: this.getByTitle(addOrUpdateSettings.Title) }];\r\n                    case 4:\r\n                        e_1 = _a.sent();\r\n                        return [4 /*yield*/, this.add(title, desc, template, enableContentTypes, addOrUpdateSettings).then(function (r) { return r.data; })];\r\n                    case 5:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, { created: true, data: data, list: this.getByTitle(addOrUpdateSettings.Title) }];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Gets a list that is the default asset location for images or other files, which the users upload to their wiki pages.\r\n     */\r\n    _Lists.prototype.ensureSiteAssetsLibrary = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var json;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, spPost(this.clone(Lists, \"ensuresiteassetslibrary\"))];\r\n                    case 1:\r\n                        json = _a.sent();\r\n                        return [2 /*return*/, List(odataUrlFrom(json))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Gets a list that is the default location for wiki pages.\r\n     */\r\n    _Lists.prototype.ensureSitePagesLibrary = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var json;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, spPost(this.clone(Lists, \"ensuresitepageslibrary\"))];\r\n                    case 1:\r\n                        json = _a.sent();\r\n                        return [2 /*return*/, List(odataUrlFrom(json))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    __decorate([\r\n        tag(\"ls.add\")\r\n    ], _Lists.prototype, \"add\", null);\r\n    __decorate([\r\n        tag(\"ls.ensure\")\r\n    ], _Lists.prototype, \"ensure\", null);\r\n    __decorate([\r\n        tag(\"ls.ensureSiteAssetsLibrary\")\r\n    ], _Lists.prototype, \"ensureSiteAssetsLibrary\", null);\r\n    __decorate([\r\n        tag(\"ls.ensureSitePagesLibrary\")\r\n    ], _Lists.prototype, \"ensureSitePagesLibrary\", null);\r\n    _Lists = __decorate([\r\n        defaultPath(\"lists\")\r\n    ], _Lists);\r\n    return _Lists;\r\n}(_SharePointQueryableCollection));\r\nexport { _Lists };\r\nexport var Lists = spInvokableFactory(_Lists);\r\nvar _List = /** @class */ (function (_super) {\r\n    __extends(_List, _super);\r\n    function _List() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.delete = deleteableWithETag(\"l\");\r\n        return _this;\r\n    }\r\n    Object.defineProperty(_List.prototype, \"effectiveBasePermissions\", {\r\n        /**\r\n         * Gets the effective base permissions of this list\r\n         *\r\n         */\r\n        get: function () {\r\n            return tag.configure(SharePointQueryable(this, \"EffectiveBasePermissions\"), \"l.effectiveBasePermissions\");\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(_List.prototype, \"eventReceivers\", {\r\n        /**\r\n         * Gets the event receivers attached to this list\r\n         *\r\n         */\r\n        get: function () {\r\n            return tag.configure(SharePointQueryableCollection(this, \"EventReceivers\"), \"l.eventReceivers\");\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(_List.prototype, \"relatedFields\", {\r\n        /**\r\n         * Gets the related fields of this list\r\n         *\r\n         */\r\n        get: function () {\r\n            return tag.configure(SharePointQueryable(this, \"getRelatedFields\"), \"l.relatedFields\");\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(_List.prototype, \"informationRightsManagementSettings\", {\r\n        /**\r\n         * Gets the IRM settings for this list\r\n         *\r\n         */\r\n        get: function () {\r\n            return tag.configure(SharePointQueryable(this, \"InformationRightsManagementSettings\"), \"l.informationRightsManagementSettings\");\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Updates this list intance with the supplied properties\r\n     *\r\n     * @param properties A plain object hash of values to update for the list\r\n     * @param eTag Value used in the IF-Match header, by default \"*\"\r\n     */\r\n    _List.prototype.update = function (properties, eTag) {\r\n        if (eTag === void 0) { eTag = \"*\"; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var postBody, data, list;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        postBody = body(assign(metadata(\"SP.List\"), properties), headers({\r\n                            \"IF-Match\": eTag,\r\n                            \"X-HTTP-Method\": \"MERGE\",\r\n                        }));\r\n                        return [4 /*yield*/, spPost(this, postBody)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        list = this;\r\n                        if (hOP(properties, \"Title\")) {\r\n                            list = this.getParent(List, this.parentUrl, \"getByTitle('\" + properties.Title + \"')\");\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                data: data,\r\n                                list: list,\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Returns the collection of changes from the change log that have occurred within the list, based on the specified query.\r\n     * @param query A query that is performed against the change log.\r\n     */\r\n    _List.prototype.getChanges = function (query) {\r\n        return spPost(this.clone(List, \"getchanges\"), body({ query: assign(metadata(\"SP.ChangeQuery\"), query) }));\r\n    };\r\n    /**\r\n     * Returns the collection of items in the list based on the provided CamlQuery\r\n     * @param query A query that is performed against the list\r\n     * @param expands An expanded array of n items that contains fields to expand in the CamlQuery\r\n     */\r\n    _List.prototype.getItemsByCAMLQuery = function (query) {\r\n        var expands = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            expands[_i - 1] = arguments[_i];\r\n        }\r\n        var q = this.clone(List, \"getitems\");\r\n        return spPost(q.expand.apply(q, expands), body({ query: assign(metadata(\"SP.CamlQuery\"), query) }));\r\n    };\r\n    /**\r\n     * See: https://msdn.microsoft.com/en-us/library/office/dn292554.aspx\r\n     * @param query An object that defines the change log item query\r\n     */\r\n    _List.prototype.getListItemChangesSinceToken = function (query) {\r\n        var o = this.clone(List, \"getlistitemchangessincetoken\").usingParser({ parse: function (r) { return r.text(); } });\r\n        return spPost(o, body({ \"query\": assign(metadata(\"SP.ChangeLogItemQuery\"), query) }));\r\n    };\r\n    /**\r\n     * Moves the list to the Recycle Bin and returns the identifier of the new Recycle Bin item.\r\n     */\r\n    _List.prototype.recycle = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, spPost(this.clone(List, \"recycle\"))];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, hOP(data, \"Recycle\") ? data.Recycle : data];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Renders list data based on the view xml provided\r\n     * @param viewXml A string object representing a view xml\r\n     */\r\n    _List.prototype.renderListData = function (viewXml) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var q, data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        q = this.clone(List, \"renderlistdata(@viewXml)\");\r\n                        q.query.set(\"@viewXml\", \"'\" + viewXml + \"'\");\r\n                        return [4 /*yield*/, spPost(q)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        // data will be a string, so we parse it again\r\n                        return [2 /*return*/, JSON.parse(hOP(data, \"RenderListData\") ? data.RenderListData : data)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Returns the data for the specified query view\r\n     *\r\n     * @param parameters The parameters to be used to render list data as JSON string.\r\n     * @param overrideParameters The parameters that are used to override and extend the regular SPRenderListDataParameters.\r\n     * @param queryParams Allows setting of query parameters\r\n     */\r\n    _List.prototype.renderListDataAsStream = function (parameters, overrideParameters, queryParams) {\r\n        if (overrideParameters === void 0) { overrideParameters = null; }\r\n        if (queryParams === void 0) { queryParams = new Map(); }\r\n        if (hOP(parameters, \"RenderOptions\") && isArray(parameters.RenderOptions)) {\r\n            parameters.RenderOptions = parameters.RenderOptions.reduce(function (v, c) { return v + c; });\r\n        }\r\n        var postBody = body({\r\n            overrideParameters: assign(metadata(\"SP.RenderListDataOverrideParameters\"), overrideParameters),\r\n            parameters: assign(metadata(\"SP.RenderListDataParameters\"), parameters),\r\n        });\r\n        var clone = this.clone(List, \"RenderListDataAsStream\", true);\r\n        if (queryParams && queryParams.size > 0) {\r\n            queryParams.forEach(function (v, k) { return clone.query.set(k, v); });\r\n        }\r\n        return spPost(clone, postBody);\r\n    };\r\n    /**\r\n     * Gets the field values and field schema attributes for a list item.\r\n     * @param itemId Item id of the item to render form data for\r\n     * @param formId The id of the form\r\n     * @param mode Enum representing the control mode of the form (Display, Edit, New)\r\n     */\r\n    _List.prototype.renderListFormData = function (itemId, formId, mode) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, spPost(this.clone(List, \"renderlistformdata(itemid=\" + itemId + \", formid='\" + formId + \"', mode='\" + mode + \"')\"))];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        // data will be a string, so we parse it again\r\n                        return [2 /*return*/, JSON.parse(hOP(data, \"RenderListFormData\") ? data.RenderListFormData : data)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Reserves a list item ID for idempotent list item creation.\r\n     */\r\n    _List.prototype.reserveListItemId = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, spPost(this.clone(List, \"reservelistitemid\"))];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        return [2 /*return*/, hOP(data, \"ReserveListItemId\") ? data.ReserveListItemId : data];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Returns the ListItemEntityTypeFullName for this list, used when adding/updating list items. Does not support batching.\r\n     */\r\n    _List.prototype.getListItemEntityTypeFullName = function () {\r\n        return this.clone(List, null, false).select(\"ListItemEntityTypeFullName\").get().then(function (o) { return o.ListItemEntityTypeFullName; });\r\n    };\r\n    /**\r\n     * Creates an item using path (in a folder), validates and sets its field values.\r\n     *\r\n     * @param formValues The fields to change and their new values.\r\n     * @param decodedUrl Path decoded url; folder's server relative path.\r\n     * @param bNewDocumentUpdate true if the list item is a document being updated after upload; otherwise false.\r\n     * @param checkInComment Optional check in comment.\r\n     * @param additionalProps Optional set of additional properties LeafName new document file name,\r\n     */\r\n    _List.prototype.addValidateUpdateItemUsingPath = function (formValues, decodedUrl, bNewDocumentUpdate, checkInComment, additionalProps) {\r\n        if (bNewDocumentUpdate === void 0) { bNewDocumentUpdate = false; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var addProps, res;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        addProps = {\r\n                            FolderPath: toResourcePath(decodedUrl),\r\n                        };\r\n                        if (objectDefinedNotNull(additionalProps)) {\r\n                            if (additionalProps.leafName) {\r\n                                addProps.LeafName = toResourcePath(additionalProps.leafName);\r\n                            }\r\n                            if (additionalProps.objectType) {\r\n                                addProps.UnderlyingObjectType = additionalProps.objectType;\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, spPost(this.clone(List, \"AddValidateUpdateItemUsingPath()\"), body({\r\n                                bNewDocumentUpdate: bNewDocumentUpdate,\r\n                                checkInComment: checkInComment,\r\n                                formValues: formValues,\r\n                                listItemCreateInfo: assign(metadata(\"SP.ListItemCreationInformationUsingPath\"), addProps),\r\n                            }))];\r\n                    case 1:\r\n                        res = _a.sent();\r\n                        return [2 /*return*/, hOP(res, \"AddValidateUpdateItemUsingPath\") ? res.AddValidateUpdateItemUsingPath : res];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    __decorate([\r\n        tag(\"l.update\")\r\n    ], _List.prototype, \"update\", null);\r\n    __decorate([\r\n        tag(\"l.getChanges\")\r\n    ], _List.prototype, \"getChanges\", null);\r\n    __decorate([\r\n        tag(\"l.CAMLQuery\")\r\n    ], _List.prototype, \"getItemsByCAMLQuery\", null);\r\n    __decorate([\r\n        tag(\"l.ChangesSinceToken\")\r\n    ], _List.prototype, \"getListItemChangesSinceToken\", null);\r\n    __decorate([\r\n        tag(\"l.recycle\")\r\n    ], _List.prototype, \"recycle\", null);\r\n    __decorate([\r\n        tag(\"l.renderListData\")\r\n    ], _List.prototype, \"renderListData\", null);\r\n    __decorate([\r\n        tag(\"l.AsStream\")\r\n    ], _List.prototype, \"renderListDataAsStream\", null);\r\n    __decorate([\r\n        tag(\"l.renderListFormData\")\r\n    ], _List.prototype, \"renderListFormData\", null);\r\n    __decorate([\r\n        tag(\"l.reserveListItemId\")\r\n    ], _List.prototype, \"reserveListItemId\", null);\r\n    __decorate([\r\n        tag(\"l.getListItemEntityTypeFullName\")\r\n    ], _List.prototype, \"getListItemEntityTypeFullName\", null);\r\n    __decorate([\r\n        tag(\"l.addValidateUpdateItemUsingPath\")\r\n    ], _List.prototype, \"addValidateUpdateItemUsingPath\", null);\r\n    return _List;\r\n}(_SharePointQueryableInstance));\r\nexport { _List };\r\nexport var List = spInvokableFactory(_List);\r\n/**\r\n * Enum representing the options of the RenderOptions property on IRenderListDataParameters interface\r\n */\r\nexport var RenderListDataOptions;\r\n(function (RenderListDataOptions) {\r\n    RenderListDataOptions[RenderListDataOptions[\"None\"] = 0] = \"None\";\r\n    RenderListDataOptions[RenderListDataOptions[\"ContextInfo\"] = 1] = \"ContextInfo\";\r\n    RenderListDataOptions[RenderListDataOptions[\"ListData\"] = 2] = \"ListData\";\r\n    RenderListDataOptions[RenderListDataOptions[\"ListSchema\"] = 4] = \"ListSchema\";\r\n    RenderListDataOptions[RenderListDataOptions[\"MenuView\"] = 8] = \"MenuView\";\r\n    RenderListDataOptions[RenderListDataOptions[\"ListContentType\"] = 16] = \"ListContentType\";\r\n    RenderListDataOptions[RenderListDataOptions[\"FileSystemItemId\"] = 32] = \"FileSystemItemId\";\r\n    RenderListDataOptions[RenderListDataOptions[\"ClientFormSchema\"] = 64] = \"ClientFormSchema\";\r\n    RenderListDataOptions[RenderListDataOptions[\"QuickLaunch\"] = 128] = \"QuickLaunch\";\r\n    RenderListDataOptions[RenderListDataOptions[\"Spotlight\"] = 256] = \"Spotlight\";\r\n    RenderListDataOptions[RenderListDataOptions[\"Visualization\"] = 512] = \"Visualization\";\r\n    RenderListDataOptions[RenderListDataOptions[\"ViewMetadata\"] = 1024] = \"ViewMetadata\";\r\n    RenderListDataOptions[RenderListDataOptions[\"DisableAutoHyperlink\"] = 2048] = \"DisableAutoHyperlink\";\r\n    RenderListDataOptions[RenderListDataOptions[\"EnableMediaTAUrls\"] = 4096] = \"EnableMediaTAUrls\";\r\n    RenderListDataOptions[RenderListDataOptions[\"ParentInfo\"] = 8192] = \"ParentInfo\";\r\n    RenderListDataOptions[RenderListDataOptions[\"PageContextInfo\"] = 16384] = \"PageContextInfo\";\r\n    RenderListDataOptions[RenderListDataOptions[\"ClientSideComponentManifest\"] = 32768] = \"ClientSideComponentManifest\";\r\n})(RenderListDataOptions || (RenderListDataOptions = {}));\r\n/**\r\n * Determines the display mode of the given control or view\r\n */\r\nexport var ControlMode;\r\n(function (ControlMode) {\r\n    ControlMode[ControlMode[\"Display\"] = 1] = \"Display\";\r\n    ControlMode[ControlMode[\"Edit\"] = 2] = \"Edit\";\r\n    ControlMode[ControlMode[\"New\"] = 3] = \"New\";\r\n})(ControlMode || (ControlMode = {}));\r\n//# sourceMappingURL=types.js.map","import { __awaiter, __generator } from \"tslib\";\r\nimport { addProp } from \"@pnp/odata\";\r\nimport { _Web, Web } from \"../webs/types\";\r\nimport { Lists, List } from \"./types\";\r\nimport { odataUrlFrom } from \"../odata\";\r\nimport { SharePointQueryableCollection } from \"../sharepointqueryable\";\r\nimport { escapeQueryStrValue } from \"../utils/escapeQueryStrValue\";\r\naddProp(_Web, \"lists\", Lists);\r\naddProp(_Web, \"siteUserInfoList\", List, \"siteuserinfolist\");\r\naddProp(_Web, \"defaultDocumentLibrary\", List, \"DefaultDocumentLibrary\");\r\naddProp(_Web, \"customListTemplates\", SharePointQueryableCollection, \"getcustomlisttemplates\");\r\n_Web.prototype.getList = function (listRelativeUrl) {\r\n    return List(this, \"getList('\" + escapeQueryStrValue(listRelativeUrl) + \"')\");\r\n};\r\n_Web.prototype.getCatalog = function (type) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var data;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, this.clone(Web, \"getcatalog(\" + type + \")\").select(\"Id\").get()];\r\n                case 1:\r\n                    data = _a.sent();\r\n                    return [2 /*return*/, List(odataUrlFrom(data))];\r\n            }\r\n        });\r\n    });\r\n};\r\n//# sourceMappingURL=web.js.map","import { sp } from \"@pnp/sp\";\r\nimport \"@pnp/sp/webs\";\r\nimport \"@pnp/sp/lists\";\r\n\r\nexport interface ISPList {\r\n    id: string;\r\n    title: string;\r\n    hidden: boolean;\r\n}\r\n\r\nexport class HomeProvider {\r\n    constructor() {\r\n        sp.setup({\r\n            sp: {\r\n                headers: {\r\n                    Accept: \"application/json;odata=verbose\",\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public getLists(): Promise<ISPList[]> {\r\n        return sp.web.lists.select(\"Id\", \"Title\", \"Hidden\").get()\r\n            .then(data => {\r\n                let result: ISPList[] = [];\r\n                result = data.map(item => {\r\n                    const list: ISPList = {\r\n                        id: item.Id,\r\n                        title: item.Title,\r\n                        hidden: item.Hidden\r\n                    };\r\n                    return list;\r\n                });\r\n                return result;\r\n            });\r\n    }\r\n\r\n    public testPromise(): Promise<string> {\r\n        const result = \"Hello!\";\r\n        return new Promise(resolve => {\r\n            setTimeout(_ => {\r\n                resolve(result);\r\n            }, 1000);\r\n        });\r\n    }\r\n}","import { HomeProvider } from \"../providers/HomeProviders\";\r\n\r\nexport class HomeWebpart {\r\n\r\n    private _provider = new HomeProvider();\r\n\r\n    constructor() {\r\n        this._provider.getLists().then(data => {\r\n            console.log(\"Lists :\", data);\r\n            const p = document.getElementById(\"p_home_w\");\r\n            if (p)\r\n                p.innerText = JSON.stringify(data);\r\n        });\r\n    }\r\n}\r\n\r\n(() => {\r\n    new HomeWebpart();\r\n})();"],"sourceRoot":""}